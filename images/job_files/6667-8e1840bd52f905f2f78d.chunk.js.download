"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6667],{66684:(e,t,i)=>{i.d(t,{N:()=>n});var o=i(13573);const n=e=>o.ut.put("/v1/user/me/consents",e)},47815:(e,t,i)=>{i.d(t,{V:()=>C});var o=i(13274),n=i(71996),a=i(29249),r=i(8230),s=i(49030),l=i(92935),c=i(79474),d=i(65305),u=i(77617),h=i(21110);function m(e,t,i){return e.length===t||e.length===i&&t===i-1}const p=d.Ay.div.withConfig({componentId:"sc-b391e981-0"})(["position:relative;"]),g=d.Ay.div.withConfig({componentId:"sc-b391e981-1"})(["display:grid;grid-gap:",";grid-auto-flow:column;grid-template-columns:repeat(",",minmax(0,1fr));"],(0,h.a)(8),(e=>{let{length:t}=e;return t})),f=d.Ay.div.withConfig({componentId:"sc-b391e981-2"})(["",";display:flex;color:",";transition:color 0.5s;border-radius:",";border:2px solid ",";height:",";text-align:center;outline:none;align-items:center;justify-content:center;"],s.Tg.HeadingMedium(),(e=>{let{dimmed:t}=e;return t?(0,r.w)({dark:n.Tj.salt16,light:n.Tj.pepper16}):a.y.text}),(0,h.a)(8),(e=>{let{focused:t}=e;return t?a.y.borderSelected:a.y.border}),(0,h.a)(80)),b=d.Ay.input.withConfig({componentId:"sc-b391e981-3"})(["position:absolute;top:0;left:0;bottom:0;width:100%;height:100%;z-index:2;opacity:0;"]),v=d.Ay.div.withConfig({componentId:"sc-b391e981-4"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]),C=c.forwardRef(((e,t)=>{let{value:i="",loading:n,onBlur:a,onFocus:r,onChange:s,pinLength:d,disabled:h,type:C="text",inputDataTestId:y,name:k,...w}=e;const[x,S]=(0,c.useState)(!1),A=(0,c.useCallback)((e=>{null==r||r(e),S(!0)}),[r]),E=(0,c.useCallback)((e=>{null==a||a(e),S(!1)}),[a]);return(0,o.jsxs)(p,{...w,children:[(0,o.jsx)(g,{length:d,children:(0,l.range)(0,d).map((e=>(0,o.jsx)(f,{dimmed:n??!1,focused:x&&m(i,e,d),tabIndex:-1,"data-test-id":w["data-test-id"]?`${w["data-test-id"]}.Element.${e}`:w["data-test-id"],children:i.slice(e,e+1)},e)))}),(0,o.jsx)(b,{maxLength:d,ref:t,type:C,autoComplete:"off",onFocus:A,onBlur:E,disabled:h,onChange:s,value:i,"data-test-id":y,name:k}),n&&(0,o.jsx)(v,{children:(0,o.jsx)(u.y,{size:"large"})})]})}))},25002:(e,t,i)=>{i.d(t,{V:()=>s}),i(11121);var o=i(79474),n=i(4497),a=i(6922);const r=new Promise((e=>{"object"==typeof window?window.hCaptchaOnLoad=()=>e():e()})),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._.PUBLIC_HCAPTCHA_SITE_KEY;(0,n.K)({src:"https://js.hcaptcha.com/1/api.js?onload=hCaptchaOnLoad&render=explicit"});const i=(0,o.useRef)(),[s,l]=(0,o.useState)("loading");(0,o.useEffect)((()=>{r.then((()=>{"loading"===s&&l("idle")}))}),[s]);const c=(0,o.useCallback)((()=>new Promise((async(o,n)=>{if("localhost"===window.location.hostname)return void o(void 0);l("busy"),await r;const a=document.getElementById(e);if(!a)return void n(new Error(`Could not find element: ${e}`));i.current&&a.removeChild(i.current),i.current=document.createElement("div"),i.current.id=`recaptcha${Date.now()}`,a.appendChild(i.current);const s=grecaptcha.render(i.current.id,{callback:e=>{l("success"),o(e)},"error-callback":()=>{l("error"),o(void 0)},"expired-callback":()=>{l("expired"),o(void 0)},sitekey:t,size:"invisible"});grecaptcha.execute(s)}))),[e,t]);return{recaptchaStatus:s,runRecaptcha:c,runWithRecaptcha:async e=>e(await c()??"")}}},80096:(e,t,i)=>{i.d(t,{D:()=>a}),i(17374),i(76293),i(58488);var o=i(79474),n=i(12081);const a=e=>{const t=e?new URLSearchParams(e).get("waid"):void 0,[i,a]=(0,n.G)("waid-attribution-id");return(0,o.useEffect)((()=>{t&&a(t)}),[t,a]),t??i??void 0}},88243:(e,t,i)=>{i.d(t,{K:()=>c});var o=i(92935),n=i.n(o),a=i(79474),r=i(50701),s=i(52902);const l=(e,t)=>n().sortBy(r.$.COUNTRY_INFO.map((i=>{return{label:e(i.id.toUpperCase(),{type:"region"})??t({id:(o=i.id.toUpperCase(),`countries.${o}`)}),value:i.code};var o})),(e=>e.label.split(" ")[1]));function c(){const{formatDisplayName:e,formatMessage:t}=(0,s.tz)();return(0,a.useMemo)((()=>l(e,t)),[e,t])}},68090:(e,t,i)=>{i.d(t,{l:()=>n});var o=i(13274);const n=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M12 .002c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12c-.007-6.624-5.376-11.993-12-12m0 19a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m1.6-6.08a1 1 0 0 0-.6.917 1 1 0 0 1-2 0 3 3 0 0 1 1.8-2.75A2 2 0 1 0 10 9.257a1 1 0 1 1-2 0 4 4 0 1 1 5.6 3.665",clipRule:"evenodd"})})},31376:(e,t,i)=>{i.d(t,{z:()=>n});var o=i(13274);i(79474);const n=e=>(0,o.jsx)("svg",{viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{d:"M 10.279 16.8104 C 9.86936 17.219 9.3143 17.4483 8.7357 17.4481 C 7.85235 17.4479 7.05609 16.9156 6.71827 16.0993 C 6.38044 15.2831 6.56757 14.3438 7.1924 13.7194 L 16.6124 4.31979 C 16.6811 4.25164 16.7199 4.1589 16.7201 4.06209 C 16.7195 3.96564 16.6814 3.87322 16.6138 3.80439 L 14.0499 1.24192 C 13.8422 1.03356 13.7803 0.720666 13.8931 0.448935 C 14.0059 0.177204 14.2711 0.0000623151 14.5653 0 H 23.301 C 23.703 0 24.029 0.325925 24.029 0.727973 V 9.46365 C 24.0289 9.75824 23.8513 10.0238 23.5791 10.1363 C 23.4908 10.1724 23.3964 10.1911 23.301 10.1916 C 23.1076 10.1916 22.9221 10.1146 22.7856 9.9776 L 20.21 7.40785 C 20.142 7.33948 20.0495 7.30104 19.953 7.30104 C 19.8566 7.30104 19.7641 7.33948 19.6961 7.40785 L 10.279 16.8104 Z M 9.46365 3.6167 C 10.2677 3.6167 10.9196 4.26855 10.9196 5.07265 C 10.9196 5.45879 10.7662 5.82911 10.4932 6.10215 C 10.2201 6.3752 9.84979 6.52859 9.46365 6.52859 H 4.36784 C 3.56374 6.52859 2.91189 7.18044 2.91189 7.98454 V 19.6321 C 2.91189 20.4362 3.56374 21.088 4.36784 21.088 H 16.0154 C 16.8195 21.088 17.4713 20.4362 17.4713 19.6321 V 15.9922 C 17.4713 15.1881 18.1232 14.5363 18.9273 14.5363 C 19.7314 14.5363 20.3832 15.1881 20.3832 15.9922 V 19.6321 C 20.3832 22.0444 18.4277 23.9999 16.0154 23.9999 H 4.36784 C 1.95555 23.9999 0 22.0444 0 19.6321 V 7.98454 C 0 5.57225 1.95555 3.6167 4.36784 3.6167 H 9.46365 Z"})})},52103:(e,t,i)=>{i.d(t,{B9:()=>r,hn:()=>o,yU:()=>n});const o=e=>/\p{Emoji_Presentation}/gu.test(e),n=e=>/%CC%/g.test(encodeURIComponent(e)),a=/^[\w!#$%&'*+/=?^`{|}~-](\.?[\w!#$%&'*+/=?^`{|}~-])*@[\dA-Za-z](-*\.?[\dA-Za-z])*\.[A-Za-z](-?[\dA-Za-z])+$/,r=e=>a.test(e)},652:(e,t,i)=>{i.d(t,{d:()=>n});var o=i(13573);const n=e=>{let{emailToken:t}=e;return o.f8.post("/v1/wauth2/consumer-sms-email-verification",{email_token:t})}},66667:(e,t,i)=>{i.d(t,{f:()=>Gi,N:()=>Wi}),i(11121);var o=i(13274),n=i(55248),a=i(15379),r=i(91564),s=i(79474),l=i(66684),c=i(97482),d=i(13917),u=i(13477),h=i(86913),m=i(30397),p=i(80096),g=i(88243),f=i(52902),b=i(71865),v=i(18526),C=i(22567),y=i(6922),k=i(60630),w=i(71892),x=i(64954),S=i(2827),A=i(13573),E=i(55288);const T=r.type({status:r.string,results:r.array(r.type({id:r.type({$oid:r.string})}))}),j=r.union([r.type({id:r.string}),r.partial({login_token:r.string})]),N=r.partial({account_found:r.boolean});var I=i(97419),M=i(652);const V=r.type({email:r.string,phone_number:r.string});var L=i(24893),_=i(65305),U=i(44695),R=i(25002),P=i(21110),O=i(36195),F=i(54606),D=i(3189),B=i(74118),H=i(99908);var z=i(22400),$=i(28825),q=i(90856),W=i(49030),G=i(21101),Z=i(92935),Y=i(50979),K=i(43050),J=i(1353),Q=i(91417),X=i(86575),ee=i(76175),te=i(64897);function ie(e){var t;return null===(t=e.number)||void 0===t?void 0:t.e164}const oe=_.Ay.div.withConfig({componentId:"sc-15ab2e8a-0"})(["width:100%;max-width:",";margin:0 auto;"],(0,z.a8)(375)),ne=_.Ay.div.withConfig({componentId:"sc-15ab2e8a-1"})(["position:relative;height:0;padding-top:","%;overflow:hidden;"],2/3*100),ae=(0,_.Ay)(Y.f).withConfig({componentId:"sc-15ab2e8a-2"})(["position:absolute;top:0;left:0;height:100%;width:100%;"]),re=_.Ay.div.withConfig({componentId:"sc-15ab2e8a-3"})(["",";padding:"," 0 ",";"],W.Tg.HeadingMedium(),(0,z.a8)(32),(0,z.a8)(16)),se=(0,_.Ay)(K.F).withConfig({componentId:"sc-15ab2e8a-4"})(["margin:"," 0 0 0;"],(0,z.a8)(8)),le=_.Ay.form.withConfig({componentId:"sc-15ab2e8a-5"})(["display:grid;margin:0;"]),ce=(0,_.Ay)(J.O).withConfig({componentId:"sc-15ab2e8a-6"})(["padding:0 0 ",";"],(0,z.a8)(8)),de=_.Ay.div.withConfig({componentId:"sc-15ab2e8a-7"})(["display:flex;flex-direction:row;"]),ue=(0,_.Ay)(Q.m).withConfig({componentId:"sc-15ab2e8a-8"})(["margin:0 "," 0 0;"],(0,z.a8)(8)),he=_.Ay.footer.withConfig({componentId:"sc-15ab2e8a-9"})(["display:flex;","{flex-direction:column;> button + button{margin-top:",";}}","{> button{flex:1;}> button + button{margin-inline-start:",";}}"],(0,te.rW)("small"),(0,z.a8)(8),(0,te.JE)("small"),(0,z.a8)(8)),me=e=>{let{errorMessage:t,initialPhoneNumber:i,isLoading:n,onSubmit:a}=e;const r=(0,f.tz)(),l=(0,s.useMemo)((()=>{var e;if(null===i)return{countryCode:"",phoneNumber:""};const t=(0,G.lq)(i);return{countryCode:t.regionCode??"",phoneNumber:(null===(e=t.number)||void 0===e?void 0:e.significant)??""}}),[]),{register:c,handleSubmit:d,watch:u}=(0,X.g)({defaultValues:l}),h=(0,s.useMemo)((()=>{var e;const t=(null===(e=Intl)||void 0===e?void 0:e.DisplayNames)?new Intl.DisplayNames([r.locale],{type:"region"}):null,i=e=>{const i=`+${(0,G.qY)(e)}`,o=null==t?void 0:t.of(e);return t&&void 0!==o?`${o} (${i})`:`${e} (${i})`};return(0,Z.sortBy)((0,G.LU)().map((e=>({value:e,label:i(e)}))),"label")}),[r.locale]),{phoneNumber:m,countryCode:p}=u(),g=(0,s.useMemo)((()=>(0,G.lq)(m,{regionCode:p})),[m,p]).valid,b=!g||n,v=Boolean(t),C=g?void 0:r.formatMessage({id:"auth.change-phone-number.error-invalid-phone-number"});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(oe,{children:(0,o.jsx)(ne,{children:(0,o.jsx)(ae,{src:ee.L.wide.phoneButtons})})}),(0,o.jsx)(re,{children:r.formatMessage({id:"auth.change-phone-number.title"})}),(0,o.jsxs)(le,{onSubmit:d((e=>{const t=(0,G.lq)(e.phoneNumber,{regionCode:e.countryCode});a(ie(t)??"")})),children:[(0,o.jsx)(ce,{errorMessage:C,children:(0,o.jsxs)(de,{children:[(0,o.jsx)(ue,{...c("countryCode"),placeholder:"",label:r.formatMessage({id:"auth.change-phone-number.country"}),options:h}),(0,o.jsx)(q.pd,{...c("phoneNumber"),id:"change-phone-number-form-input",label:r.formatMessage({id:"auth.change-phone-number.phone-number"})})]})}),v&&(0,o.jsx)(se,{variant:"error",style:{marginBottom:(0,z.a8)(8)},children:t}),(0,o.jsx)(he,{style:{marginTop:(0,z.a8)(8)},children:(0,o.jsx)($.$n,{size:"large",variant:"primary",stretch:!0,type:"submit",disabled:b,loading:n,children:r.formatMessage({id:"auth.change-phone-number.save"})})})]})]})};var pe=i(97203),ge=i(71298),fe=i(141),be=i(34673),ve=i(96212);const Ce=_.Ay.div.withConfig({componentId:"sc-f0dbdfb-0"})(["display:flex;justify-content:space-between;flex-direction:column;"]),ye=_.Ay.div.withConfig({componentId:"sc-f0dbdfb-1"})(["",""],ve.T.HeadingMedium),ke=_.Ay.div.withConfig({componentId:"sc-f0dbdfb-2"})(["margin:"," 0 "," 0;",";"],(0,P.a)(16),(0,P.a)(16),ve.T.Body2()),we=(0,_.Ay)(K.F).withConfig({componentId:"sc-f0dbdfb-3"})(["margin-bottom:",";"],(0,P.a)(8)),xe=_.Ay.div.withConfig({componentId:"sc-f0dbdfb-4"})(["display:flex;flex-direction:column;padding:"," 0 0 0;> *:not(:last-child){margin:0 0 "," 0;}"],(0,P.a)(32),(0,P.a)(8)),Se=e=>{let{hideLottie:t,onChangePhoneNumber:i,onContactSupport:n,onSendAgain:a,phoneNumber:r,sendAgainCooldownSeconds:l}=e;const{formatMessage:c}=(0,f.tz)(),[d,u]=(0,s.useState)(),{displaySeconds:h,startCountdown:m}=(0,be.L)(l??0);(0,s.useEffect)((()=>{(l??0)>0&&m()}),[l,m]);const[p,g]=(0,s.useState)(!1),b=(0,s.useCallback)((async()=>{g(!0),u(void 0),(await a()).fold((()=>{}),u),g(!1)}),[a]),v=void 0!==i;return(0,o.jsxs)(Ce,{children:[!1===t&&(0,o.jsx)(Y.f,{aspectRatio:"3/2",src:ee.L.wide.girlGasp}),(0,o.jsx)(ye,{children:c({id:"auth.code-not-received.title"})}),(0,o.jsx)(ke,{children:v&&void 0!==r?c({id:"auth.code-not-received.description-with-number"},{phoneNumber:(0,o.jsx)("strong",{children:r})}):c({id:"auth.code-not-received.description"})})," ",(0,o.jsxs)(xe,{children:[(0,o.jsx)(pe.N,{children:void 0!==d&&(0,o.jsx)(ge.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,o.jsx)(we,{variant:"error","data-test-id":"NoCodeReceived.Error",children:d})})}),(0,o.jsx)(fe.$,{size:"large",variant:v?"blue":"lightBlue",type:"button","data-test-id":"NoCodeReceived.SendCodeAgain",loading:p,disabled:p||(h??0)>0,onClick:()=>{b()},children:c({id:(h??0)>0?"auth.code-not-received.send-code-again-cooldown":"auth.code-not-received.send-code-again"},{seconds:h})}),v&&(0,o.jsx)(fe.$,{size:"large",variant:"lightBlue",type:"button","data-test-id":"NoCodeReceived.ChangePhoneNumber",onClick:i,children:c({id:"auth.code-not-received.change-phone-number"})}),(0,o.jsx)(fe.$,{size:"large",variant:"lightBlue",type:"button","data-test-id":"NoCodeReceived.ContactSupport",onClick:n,children:c({id:"auth.code-not-received.contact-support"})})]})]})};var Ae=i(29249),Ee=i(37185),Te=i(63387),je=i(78089),Ne=i(52103),Ie=i(14153);const Me=e=>`CreateAccount.Consent-${e}`,Ve=e=>`CreateAccount.ConsentLink-${e}`,Le=e=>`consent-${e}`,_e=_.I4.div.withConfig({componentId:"sc-ab1d1e6-0"})(["display:flex;justify-content:space-between;flex-direction:column;"]),Ue=_.I4.h2.withConfig({componentId:"sc-ab1d1e6-1"})([""," margin:0;"],ve.T.HeadingMedium),Re=_.I4.form.withConfig({componentId:"sc-ab1d1e6-2"})(["margin:0;display:flex;flex-direction:column;> *:not(:first-child){margin-top:",";}"],(0,P.a)(16)),Pe=(0,_.I4)(J.O).withConfig({componentId:"sc-ab1d1e6-3"})(["flex:1;"]),Oe=_.I4.div.withConfig({componentId:"sc-ab1d1e6-4"})(["display:flex;> *:not(:first-child){margin-inline-start:",";}"],(0,P.a)(8)),Fe=(0,_.I4)(Q.m).withConfig({componentId:"sc-ab1d1e6-5"})(["width:100%;background:transparent;",""],(e=>e.$isEmptyValue&&(0,_.AH)(["select{color:",";padding:"," ",";}"],Ae.y.textSubdued,(0,P.a)(12),(0,P.a)(14)))),De=(0,_.I4)(Q.m).withConfig({componentId:"sc-ab1d1e6-6"})(["background:transparent;min-width:",";"],(0,P.a)(128)),Be=(0,_.I4)(ge.P.div).withConfig({componentId:"sc-ab1d1e6-7"})(["display:flex;flex-direction:column;"]),He=_.I4.div.withConfig({componentId:"sc-ab1d1e6-8"})([""," display:flex;flex-direction:column;margin-inline-start:",";"],ve.T.Body2({weight:"semiBold"}),(0,P.a)(16)),ze=(0,_.I4)(Ee.g).withConfig({componentId:"sc-ab1d1e6-9"})(["margin-top:",";"],(0,P.a)(8)),$e=_.I4.div.withConfig({componentId:"sc-ab1d1e6-10"})([""," color:",";"],ve.T.Body3({weight:"semiBold"}),Ae.y.textSubdued),qe=e=>{let{countries:t,onSubmit:i,initialCountry:n,initialFirstName:a,initialLastName:r,initialPhoneNumberCountryCode:l,isReferralCodeInputVisible:c,isSubmitting:d,isVisible:u,privacyPolicyUrl:h,recaptcha:m,shouldEnableOneClickConsents:p,submitError:g,termsUrl:b,useConsents:v,isSkipEmailVerification:C}=e;var y,k,w,S,A;const E=(0,f.tz)(),T=(0,s.useMemo)((()=>(0,Z.sortBy)(t,"label").map((e=>{let{code:t,label:i}=e;return{label:i,value:t}}))),[t]),j=(0,G.LU)().map((e=>({value:e,label:`${e} +${(0,G.qY)(e)}`}))),{formatMessage:N}=E,{formState:{errors:I},getValues:M,handleSubmit:V,register:L,trigger:_,watch:U}=(0,X.g)({defaultValues:{country:(R=n,Ie.kk.some((e=>e.code===R))?n:""),firstName:a??"",lastName:r??"",phoneNumber:"",phoneNumberCountryCode:l,referralCode:""}});var R;const{country:P,phoneNumber:O,phoneNumberCountryCode:D}=U(),B=(()=>{const{formatMessage:e}=(0,f.tz)();return(0,s.useCallback)(((t,i)=>{if(!(0,G.lq)(t,{regionCode:i}).valid)return e(""===t?{id:"auth.create-account.error-phone-number-required"}:{id:"auth.create-account.error-invalid-phone-number"})}),[e])})(),H=(()=>{const{formatMessage:e}=(0,f.tz)();return(0,s.useCallback)((t=>t.trim()?(0,Ne.hn)(t)?e({id:"auth.create-account.error-name-no-emojis"}):(0,Ne.yU)(t)?e({id:"auth.create-account.error-name-invalid-characters"}):void 0:e({id:"auth.create-account.error-first-name-required"})),[e])})(),z=(()=>{const{formatMessage:e}=(0,f.tz)();return(0,s.useCallback)((t=>t.trim()?(0,Ne.hn)(t)?e({id:"auth.create-account.error-name-no-emojis"}):(0,Ne.yU)(t)?e({id:"auth.create-account.error-name-invalid-characters"}):void 0:e({id:"auth.create-account.error-last-name-required"})),[e])})(),$=v({country:P,shouldEnableOneClickConsents:p}),W=(0,Z.isEmpty)(P)?{$isEmptyValue:!0,label:"",placeholder:N({id:"auth.create-account.country-select"}),...L("country",{validate:e=>(0,Z.isEmpty)(e)?N({id:"auth.create-account.error-country-required"}):void 0})}:{$isEmptyValue:!1,label:N({id:"auth.create-account.country"}),placeholder:"",...L("country")},Y=(!0===(null==$?void 0:$.isOneClickConsentFlow)?[]:null==$?void 0:$.consents)??[];return(0,F.B)(u&&$&&void 0!==P?{name:"signUpFormView",properties:{detectedCountry:n,isConsentsLayoutSimplified:$.isOneClickConsentFlow,selectedCountry:P,isNewUserAccount:!0,isUnverifiedEmailFlow:C}}:void 0),(0,o.jsxs)(_e,{children:[(0,o.jsx)(Ue,{children:N({id:"auth.create-account.title"})}),(0,o.jsxs)(Re,{"aria-labelledby":"step-method-select-email-title",onSubmit:e=>{V((e=>{if(!e.country||!$)return;const{consents:t,isOneClickConsentFlow:o}=$,a=o?t.map((e=>({id:e.id,value:!!e.required||e.defaultValue}))):t.map((t=>({id:t.id,value:!0===e[Le(t.id)]})));x.Ep.signUpFormDataConsents({detectedCountry:n,promoConsentGiven:Object.fromEntries(a.flatMap((e=>{let{id:i,value:o}=e;var n;const a=null===(n=t.find((e=>e.id===i)))||void 0===n?void 0:n.slug;return void 0!==a?[[a,Number(o)]]:[]}))),isConsentsLayoutSimplified:o,selectedCountry:e.country,isUnverifiedEmailFlow:C}),i({consents:a,country:e.country,firstName:e.firstName,lastName:e.lastName,phoneNumber:ie((0,G.lq)(O,{regionCode:D}))??"",referralCode:e.referralCode},{isOneClickConsentFlow:o})}))(e)},children:[m,(0,o.jsx)(J.O,{errorMessage:null===(y=I.country)||void 0===y?void 0:y.message,"data-test-id":"CreateAccount.CountryError",children:(0,o.jsx)(Fe,{disabled:d,options:T,selectDataTestId:"CreateAccount.Country",...W})}),(0,o.jsxs)(Oe,{children:[(0,o.jsx)(Pe,{errorMessage:null===(k=I.firstName)||void 0===k?void 0:k.message,errorMessageTestId:"CreateAccount.FirstNameError",children:(0,o.jsx)(q.pd,{id:"create-account-first-name",label:N({id:"auth.create-account.first-name"}),"data-test-id":"CreateAccount.FirstName",disabled:d,statusIcon:void 0!==I.firstName?"error":void 0,...L("firstName",{validate:H})})}),(0,o.jsx)(Pe,{errorMessage:null===(w=I.lastName)||void 0===w?void 0:w.message,errorMessageTestId:"CreateAccount.LastNameError",children:(0,o.jsx)(q.pd,{id:"create-account-last-name",label:N({id:"auth.create-account.last-name"}),"data-test-id":"CreateAccount.LastName",disabled:d,statusIcon:void 0!==I.lastName?"error":void 0,...L("lastName",{validate:z})})})]}),(0,o.jsx)(Te.N,{messageVariant:void 0!==(null===(S=I.phoneNumber)||void 0===S?void 0:S.message)?"error":"info",message:(null===(A=I.phoneNumber)||void 0===A?void 0:A.message)??N({id:"auth.create-account.phone-description"}),"data-test-id":"CreateAccount.PhoneNumberError",children:(0,o.jsxs)(Oe,{children:[(0,o.jsx)(De,{disabled:d,label:N({id:"auth.create-account.country"}),placeholder:"",options:j,selectDataTestId:"CreateAccount.PhoneNumberCountryCode",...L("phoneNumberCountryCode",{onBlur:()=>{M("phoneNumber")&&_("phoneNumber")}})}),(0,o.jsx)(q.pd,{id:"create-account-phone-number",label:N({id:"auth.create-account.phone"}),"data-test-id":"CreateAccount.PhoneNumber",disabled:d,type:"tel",statusIcon:void 0!==I.phoneNumber?"error":void 0,...L("phoneNumber",{validate:()=>B(M("phoneNumber"),M("phoneNumberCountryCode"))})})]})}),c&&(0,o.jsx)(Te.N,{messageVariant:"info",message:N({id:"auth.create-account.optional-field"}),children:(0,o.jsx)(q.pd,{id:"create-account-referral-code",label:N({id:"auth.create-account.referral-code"}),"data-test-id":"CreateAccount.ReferralCode",disabled:d,...L("referralCode")})}),(0,o.jsx)(pe.N,{initial:!1,children:Y.map((e=>{let{id:t,text:i,link:a,required:r,slug:s}=e;return(0,o.jsx)(Be,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,o.jsx)(je.S,{disabled:d,label:(0,o.jsx)(J.O,{errorMessageTestId:(l=t,`CreateAccount.ConsentError-${l}`),errorMessage:I[Le(t)]?N({id:"auth.create-account.error-consent-required"}):void 0,children:(0,o.jsxs)(He,{children:[(0,o.jsx)("span",{"aria-hidden":!0,children:i}),a&&(0,o.jsx)(ze,{"data-test-id":Ve(t),href:a.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>{P&&x.Ep.signUpFormInteractionReadTerms({detectedCountry:n,legalTerms:s,isConsentsLayoutSimplified:(null==$?void 0:$.isOneClickConsentFlow)??!1,selectedCountry:P})},children:a.text})]})}),"data-test-id":Me(t),...L(Le(t),{required:r})})},t);var l}))}),(0,o.jsx)(pe.N,{children:void 0!==g&&(0,o.jsx)(ge.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,o.jsx)(K.F,{variant:"error","data-test-id":"CreateAccount.SubmitError",children:g})})}),(0,o.jsx)(fe.$,{size:"large",variant:"blue",type:"submit",loading:d||void 0===$,disabled:d||void 0===$,"data-test-id":"CreateAccount.Continue",children:N({id:"auth.create-account.continue"})}),p&&(0,o.jsx)($e,{children:N({id:"auth.create-account.legal-statement"},{a_pp:e=>(0,o.jsx)(Ee.g,{"data-test-id":"CreateAccount.PrivacyPolicyLink",href:h,target:"_blank",rel:"noreferrer",size:"inherit",onClick:()=>{P&&$&&x.Ep.signUpFormInteractionReadTerms({detectedCountry:n,legalTerms:"privacy_statement",isConsentsLayoutSimplified:$.isOneClickConsentFlow,selectedCountry:P})},children:e}),a_tos:e=>(0,o.jsx)(Ee.g,{"data-test-id":"CreateAccount.TermsOfServiceLink",href:b,target:"_blank",rel:"noreferrer",size:"inherit",onClick:()=>{P&&$&&x.Ep.signUpFormInteractionReadTerms({detectedCountry:n,legalTerms:"terms_of_service",isConsentsLayoutSimplified:$.isOneClickConsentFlow,selectedCountry:P})},children:e})})})]})]})};var We=i(31376),Ge=i(77617),Ze=i(26455),Ye=i(47647),Ke=i(27975);const Je=(0,_.i7)(["0%{transform:scale(0.4);}75%{transform:scale(1.1);}100%{transform:scale(1);}"]),Qe=(0,_.i7)(["0%{transform:scale(1);}100%{transform:scale(0.4);}"]),Xe=(0,_.i7)(["0%{opacity:0;}100%{opacity:1;}"]),et=(0,_.i7)(["0%{opacity:1;}100%{opacity:0;}"]),tt=_.Ay.div.withConfig({componentId:"sc-44701938-0"})(["display:flex;align-items:center;justify-content:center;animation:",";"],(e=>{let{show:t}=e;return(0,_.AH)([""," 300ms,"," 300ms"],t?Xe:et,t?Je:Qe)})),it=e=>{let{show:t,children:i}=e;const[n,a]=(0,s.useState)(t);return(0,s.useEffect)((()=>{t&&a(!0)}),[t]),n?(0,o.jsx)(tt,{onAnimationEnd:()=>{t||a(!1)},show:t,children:i}):null},ot=e=>(0,o.jsx)("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,...e,children:(0,o.jsxs)("g",{transform:"translate(-.06 -.064)",children:[(0,o.jsx)("path",{fill:"none",d:"M.06.064h19.548v19.969H.06z"}),(0,o.jsx)("clipPath",{id:"google_icon_svg__a",children:(0,o.jsx)("path",{d:"M.06.064h19.548v19.969H.06z"})}),(0,o.jsxs)("g",{clipPath:"url(#google_icon_svg__a)",children:[(0,o.jsx)("path",{fill:"none",d:"M.06.063h19.475v19.883H.061z"}),(0,o.jsx)("path",{d:"M19.55 10.257c0-.705-.063-1.382-.18-2.031h-9.354v3.841h5.345a4.572 4.572 0 01-1.982 2.997v2.493h3.21c1.877-1.73 2.961-4.276 2.961-7.3z",fill:"#4285f4"}),(0,o.jsx)("path",{d:"M10.016 19.963c2.682 0 4.93-.89 6.572-2.406l-3.209-2.493c-.89.596-2.027.948-3.363.948-2.587 0-4.776-1.748-5.558-4.095H1.14v2.574a9.93 9.93 0 008.876 5.472z",fill:"#34a853"}),(0,o.jsx)("path",{d:"M4.458 11.917a5.97 5.97 0 01-.31-1.886c0-.654.112-1.292.31-1.888V5.57H1.14a9.94 9.94 0 000 8.92l3.318-2.574z",fill:"#fbbc05"}),(0,o.jsx)("path",{d:"M10.016 4.05c1.457 0 2.767.5 3.796 1.484l2.85-2.848C14.94 1.083 12.691.099 10.015.099A9.927 9.927 0 001.14 5.571l3.318 2.572C5.24 5.797 7.43 4.05 10.016 4.05z",fill:"#ea4335"})]})]})}),nt=e=>(0,o.jsx)("svg",{viewBox:"0 0 18 21",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,o.jsx)("path",{d:"M9.267 4.846c.999 0 2.25-.64 2.995-1.495.675-.774 1.168-1.856 1.168-2.937 0-.147-.014-.294-.043-.414-1.11.04-2.446.708-3.248 1.602-.633.68-1.21 1.749-1.21 2.844 0 .16.029.32.043.373a1.7 1.7 0 00.295.027zM5.752 21c1.364 0 1.968-.868 3.67-.868 1.73 0 2.11.841 3.628.841 1.49 0 2.49-1.308 3.431-2.59 1.055-1.468 1.49-2.91 1.519-2.977-.098-.027-2.953-1.135-2.953-4.245 0-2.697 2.25-3.912 2.376-4.005-1.49-2.03-3.754-2.083-4.373-2.083-1.673 0-3.038.961-3.895.961-.928 0-2.152-.907-3.6-.907C2.798 5.127 0 7.289 0 11.374c0 2.537 1.04 5.22 2.32 6.956C3.417 19.799 4.373 21 5.752 21z"})}),at=e=>(0,o.jsx)("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,o.jsx)("path",{d:"M16.0978 8.04889C16.0978 3.60361 12.4942 0 8.04889 0C3.60361 0 0 3.60361 0 8.04889C0 12.0663 2.94336 15.3962 6.79125 16V10.3755H4.74759V8.04889H6.79125V6.27562C6.79125 4.25836 7.99289 3.1441 9.83143 3.1441C10.7121 3.1441 11.6332 3.3013 11.6332 3.3013V5.28208H10.6182C9.61835 5.28208 9.30654 5.90253 9.30654 6.53906V8.04889H11.5388L11.182 10.3755H9.30653V16C13.1544 15.3962 16.0978 12.0663 16.0978 8.04889Z",fill:"white"})}),rt=e=>(0,o.jsx)("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 6.913C16 3.469 12.41.667 8 .667c-4.411 0-8 2.802-8 6.246C0 10 2.846 12.585 6.69 13.075c.26.054.615.165.705.38.081.194.053.498.027.695l-.114.659-.003.016c-.039.208-.136.736.695.399.854-.347 4.607-2.61 6.285-4.469C15.445 9.532 16 8.291 16 6.913ZM13.337 8.9H11.09a.15.15 0 0 1-.153-.147V5.395a.15.15 0 0 1 .153-.147h2.248a.15.15 0 0 1 .152.147v.547a.15.15 0 0 1-.152.147H11.81v.567h1.527a.15.15 0 0 1 .153.147v.546a.15.15 0 0 1-.152.147H11.81v.567h1.527a.15.15 0 0 1 .153.147v.546a.15.15 0 0 1-.152.148V8.9Zm-8.16-.147a.15.15 0 0 1-.154.147H2.776a.15.15 0 0 1-.153-.147V5.395a.15.15 0 0 1 .153-.147h.568a.15.15 0 0 1 .153.147V8.06h1.527a.15.15 0 0 1 .153.147v.546Zm1.2-3.506H5.81a.15.15 0 0 0-.153.147v3.36a.15.15 0 0 0 .153.146h.567a.15.15 0 0 0 .153-.147V5.395a.15.15 0 0 0-.153-.147Zm3.294 0h.567l.001.002a.15.15 0 0 1 .153.147v3.359a.15.15 0 0 1-.153.147h-.564a.147.147 0 0 1-.04-.006h-.002a.057.057 0 0 1-.013-.004H9.62l-.007-.003-.008-.004-.004-.002-.01-.006-.001-.001a.145.145 0 0 1-.04-.037l-1.6-2.078v1.994a.15.15 0 0 1-.153.148H7.23a.15.15 0 0 1-.153-.148V5.398a.15.15 0 0 1 .153-.148h.58l.005.001h.007l.003.002.006.001.005.001.01.003.005.002.009.003.004.003.008.004c.002 0 .003.002.005.003l.008.005c.002 0 .003.002.005.003a.217.217 0 0 1 .008.006l.003.002a.063.063 0 0 1 .009.01l.007.008a.191.191 0 0 1 .006.008L9.519 7.39V5.395a.15.15 0 0 1 .153-.147Z",fill:"#fff"})}),st="rgba(57, 117, 234, 1)",lt="rgba(57, 117, 234, 0.88)",ct="rgba(57, 117, 234, 0.72)",dt="rgba(57, 117, 234, 0.64)",ut="rgba(6, 199, 85, 1)",ht="rgb(55 179 76)",mt="rgb(41 139 59)",pt="rgb(210 210 210)",gt={google:(0,Ze.I2)({light:{color:Ye.T.pepper100,background:Ye.T.salt100,backdrop:"transparent",backgroundOnHover:Ye.T.space12,backgroundOnActive:Ye.T.space24,backgroundDisabled:Ye.T.space8,colorDisabled:Ye.T.pepper40,spinnerColor:"grey",fontWeight:"bold",border:`2px solid ${Ye.T.pepper12}`,icon:ot},lightHighContrast:{color:Ye.T.pepper100,background:Ye.T.salt100,backdrop:"transparent",backgroundOnHover:Ye.T.space12,backgroundOnActive:Ye.T.space24,backgroundDisabled:Ye.T.space8,colorDisabled:Ye.T.pepper40,spinnerColor:"grey",fontWeight:"bold",border:`2px solid ${Ye.T.pepper24}`,icon:ot},dark:{color:Ye.T.salt100,background:Ye.T.space100,backdrop:"transparent",backgroundOnHover:Ye.T.salt12,backgroundOnActive:Ye.T.salt16,backgroundDisabled:Ye.T.salt40,colorDisabled:Ye.T.salt40,spinnerColor:"grey",fontWeight:"bold",border:`2px solid ${Ye.T.salt12}`,icon:ot}}),apple:(0,Ze.I2)({light:{color:Ye.T.salt100,background:Ye.T.space100,backdrop:"transparent",backgroundOnHover:Ye.T.space88,backgroundOnActive:Ye.T.space72,backgroundDisabled:Ye.T.space64,colorDisabled:Ye.T.salt40,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:nt,iconProps:{fill:Ye.T.salt100}},lightHighContrast:{color:Ye.T.salt100,background:Ye.T.space100,backdrop:"transparent",backgroundOnHover:Ye.T.space88,backgroundOnActive:Ye.T.space72,backgroundDisabled:Ye.T.space64,colorDisabled:Ye.T.salt40,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:nt,iconProps:{fill:Ye.T.salt100}},dark:{color:Ye.T.space100,background:Ye.T.salt100,backdrop:"transparent",backgroundOnHover:Ye.T.salt88,backgroundOnActive:Ye.T.salt72,backgroundDisabled:Ye.T.salt64,colorDisabled:Ye.T.salt40,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:nt,iconProps:{fill:Ye.T.space100}}}),facebook:(0,Ze.I2)({light:{color:Ye.T.salt100,background:st,backdrop:"transparent",backgroundOnHover:lt,backgroundOnActive:ct,backgroundDisabled:dt,colorDisabled:Ye.T.salt40,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:at},lightHighContrast:{color:Ye.T.salt100,background:st,backdrop:"transparent",backgroundOnHover:lt,backgroundOnActive:ct,backgroundDisabled:dt,colorDisabled:Ye.T.salt40,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:at},dark:{color:Ye.T.salt100,background:st,backdrop:"transparent",backgroundOnHover:lt,backgroundOnActive:ct,backgroundDisabled:dt,colorDisabled:Ye.T.salt40,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:at}}),line:(0,Ze.I2)({light:{color:Ye.T.salt100,background:ut,backdrop:"transparent",backgroundOnHover:ht,backgroundOnActive:mt,backgroundDisabled:Ye.T.salt100,colorDisabled:pt,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:rt},lightHighContrast:{color:Ye.T.salt100,background:ut,backdrop:"transparent",backgroundOnHover:ht,backgroundOnActive:mt,backgroundDisabled:Ye.T.salt100,colorDisabled:pt,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:rt},dark:{color:Ye.T.pepper100,background:ut,backdrop:"transparent",backgroundOnHover:ht,backgroundOnActive:mt,backgroundDisabled:dt,colorDisabled:pt,spinnerColor:"grey",fontWeight:"semiBold",border:"none",icon:rt,iconProps:{color:Ye.T.pepper100}}})},ft=_.Ay.div.withConfig({componentId:"sc-8f4857d4-0"})(["position:absolute;display:inline-flex;align-items:center;inset-inline-start:",";"],(0,P.a)(16)),bt=_.Ay.div.withConfig({componentId:"sc-8f4857d4-1"})(["flex:1;"]),vt=_.Ay.div.withConfig({componentId:"sc-8f4857d4-2"})(["position:absolute;top:0;right:0;bottom:0;left:0;border-radius:",";border:",";"],(0,P.a)(8),(e=>{let{variant:t,theme:{cbThemeMode:i="light"}}=e;return gt[t][i].border})),Ct=_.Ay.button.withConfig({componentId:"sc-8f4857d4-3"})(["border:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;z-index:0;user-select:none;display:inline-flex;align-items:center;justify-content:center;",";width:100%;max-width:100%;cursor:pointer;&:disabled{cursor:not-allowed;}padding:0 ",";min-height:",";border-radius:",";background:",";","{transition:background-color 120ms ease-out;background:",";}color:",";","{svg{width:",";}}&:hover ","{background:",";}&:active ","{background:",";}&"," ","{box-shadow:0 0 0 "," ",";}&:focus{outline:none;}"],(e=>{let{variant:t,theme:{cbThemeMode:i="light"}}=e;return ve.T.Body2({weight:gt[t][i].fontWeight})}),(0,P.a)(16),(0,P.a)(54),(0,P.a)(8),(e=>{let{variant:t,theme:{cbThemeMode:i="light"}}=e;return gt[t][i].backdrop}),vt,(e=>{let{disabled:t,variant:i,theme:{cbThemeMode:o="light"}}=e;return t?gt[i][o].backgroundDisabled:gt[i][o].background}),(e=>{let{disabled:t,variant:i,theme:{cbThemeMode:o="light"}}=e;return t?gt[i][o].colorDisabled:gt[i][o].color}),ft,(0,P.a)(16),vt,(e=>{let{disabled:t,variant:i,theme:{cbThemeMode:o="light"}}=e;return!t&&gt[i][o].backgroundOnHover}),vt,(e=>{let{disabled:t,variant:i,theme:{cbThemeMode:o="light"}}=e;return!t&&gt[i][o].backgroundOnActive}),Ke.uz,vt,"3px",Ae.y.outlineFocused),yt=_.Ay.div.withConfig({componentId:"sc-8f4857d4-4"})(["flex:1;z-index:1;display:flex;align-items:center;justify-content:center;opacity:",";transition:opacity 150ms ease-in;border-radius:",";overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;"],(e=>{let{visible:t}=e;return t?1:0}),(0,P.a)(8)),kt=_.Ay.div.withConfig({componentId:"sc-8f4857d4-5"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;display:flex;align-items:center;justify-content:center;"]),wt=e=>{let{children:t,disabled:i=!1,loading:n,onClick:a,role:r="button",type:s="button",variant:l,...c}=e;const{themeMode:d}=(0,Ze.DP)(),u=gt[l][d].icon;return(0,o.jsxs)(Ct,{onClick:i?void 0:a,disabled:i,role:r,variant:l,type:s,...c,children:[(0,o.jsx)(vt,{variant:l}),(0,o.jsx)(kt,{children:(0,o.jsx)(it,{show:!0===n,children:(0,o.jsx)(Ge.y,{color:gt[l][d].spinnerColor,size:"medium"})})}),(0,o.jsxs)(yt,{visible:!1===(n??!1),children:[u&&(0,o.jsx)(ft,{children:(0,o.jsx)(u,{...gt[l][d].iconProps})}),(0,o.jsx)(bt,{children:t})]})]})};var xt=i(21658),St=i.n(xt);const At={gmail:{builder:e=>{let{email:t,from:i,hoursAgo:o}=e;return`https://mail.google.com/mail/u/${t}/#search/${[void 0!==i?`from:(${i})`:null,"in:anywhere",void 0!==o?`newer_than:${o}h`:null].filter((e=>null!==e)).join("+")}`},matcher:e=>e.endsWith("@gmail.com")},hotmail:{builder:e=>{let{email:t}=e;return`https://outlook.live.com/mail/?login_hint=${t}`},matcher:e=>e.endsWith("@hotmail.com")},icloud:{builder:()=>"https://www.icloud.com/mail/",matcher:e=>e.endsWith("@icloud.com")},mailRu:{builder:()=>"https://mail.ru/",matcher:e=>e.endsWith("@mail.ru")},yahoo:{builder:e=>{let{from:t,daysAgo:i}=e;return`https://mail.yahoo.com/d/search/keyword=${[void 0!==t?`from:${t}`:null,void 0!==i?`after:${St()().subtract(i,"day").format("YYYY-MM-DD")}`:null].filter((e=>null!==e)).join(" ")}`},matcher:e=>e.endsWith("@yahoo.com")}},Et=e=>e.endsWith("@wolt.com")?"gmail":null,Tt=_.Ay.div.withConfig({componentId:"sc-8bb2b807-0"})(["display:flex;justify-content:space-between;flex-direction:column;"]),jt=_.Ay.h2.withConfig({componentId:"sc-8bb2b807-1"})([""," margin:0;"],ve.T.HeadingMedium),Nt=_.Ay.div.withConfig({componentId:"sc-8bb2b807-2"})(["margin:"," 0 "," 0;",";"],(0,P.a)(16),(0,P.a)(16),ve.T.Body2()),It=(0,_.Ay)(K.F).withConfig({componentId:"sc-8bb2b807-3"})(["margin-bottom:",";"],(0,P.a)(16)),Mt=_.Ay.a.withConfig({componentId:"sc-8bb2b807-4"})(["display:block;margin-bottom:",";"],(0,P.a)(8)),Vt=(0,_.Ay)(fe.$).withConfig({componentId:"sc-8bb2b807-5"})(["width:100%;"]),Lt=(0,_.Ay)(We.z).withConfig({componentId:"sc-8bb2b807-6"})(["margin-inline-start:",";width:",";fill:currentColor;"],(0,P.a)(4),(0,P.a)(16)),_t=e=>{let{sniperLink:t,isNewUserAccount:i}=e;const{formatMessage:n}=(0,f.tz)(),a=(0,s.useCallback)((()=>{t&&x.Ep.requestEmailSuccessInteractionOpenEmailApp({emailProvider:t.provider,isNewUserAccount:i})}),[i,t]);return t?"gmail"===(null==t?void 0:t.provider)?(0,o.jsx)(Mt,{href:t.link,target:"_blank",rel:"noreferrer",children:(0,o.jsx)(wt,{onClick:a,variant:"google",children:n({id:"auth.magic-email.open-email-gmail"})})}):"hotmail"===(null==t?void 0:t.provider)||"icloud"===(null==t?void 0:t.provider)||"mailRu"===(null==t?void 0:t.provider)||"yahoo"===(null==t?void 0:t.provider)?(0,o.jsx)(Mt,{href:t.link,target:"_blank",rel:"noreferrer",children:(0,o.jsxs)(Vt,{onClick:a,size:"large",type:"button",variant:"blue",children:["hotmail"===t.provider&&n({id:"auth.magic-email.open-email-hotmail"}),"icloud"===t.provider&&n({id:"auth.magic-email.open-email-icloud"}),"mailRu"===t.provider&&n({id:"auth.magic-email.open-email-mail-ru"}),"yahoo"===t.provider&&n({id:"auth.magic-email.open-email-yahoo"}),(0,o.jsx)(Lt,{})]})}):(0,o.jsx)(Mt,{href:t.link,target:"_blank",rel:"noreferrer",children:(0,o.jsxs)(Vt,{onClick:a,size:"large",type:"button",variant:"blue",children:[n({id:"auth.magic-email.open-email-other"}),(0,o.jsx)(Lt,{})]})}):null},Ut=e=>{let{animation:t,buttonText:i,email:n,error:a,onResendEmail:r,recaptcha:l,isNewUserAccount:c}=e;const{formatMessage:d}=(0,f.tz)(),[u,h]=(0,s.useState)(),m=(0,s.useCallback)((async()=>{h({status:"resending"}),(await r()).fold((()=>{h({status:"success",message:d({id:"auth.magic-email.email-resent"})})}),(e=>{h({status:"error",message:e})}))}),[d,r]),p="error"===(null==u?void 0:u.status)?u.message:a,g="on"===(0,w.u)("woltcom-auth-sniper-link"),b=(0,s.useMemo)((()=>g?(e=>(e=>{const t=((e,t)=>{const i=null==t?void 0:t(e);return i?[i,At[i]]:Object.entries(At).find((t=>{let[i,{matcher:o}]=t;return o(e)}))||null})(e.email,e.customMatcher);if(!t)return null;const[i,{builder:o}]=t;return{provider:i,link:o(e)}})({customMatcher:Et,daysAgo:1,email:e,from:"production"===y._.APP_ENV?"info@wolt.com":"info@development.dev.woltapi.com",hoursAgo:1}))(n):null),[n,g]);return(0,s.useEffect)((()=>{x.ry.requestEmailSuccessView({emailProvider:b?b.provider:void 0})}),[b]),(0,o.jsxs)(Tt,{children:[(0,o.jsx)(Y.f,{aspectRatio:"3/2",src:"verifyEmail"===t?ee.L.wide.verifyEmail:ee.L.wide.mail}),(0,o.jsx)(jt,{children:d({id:"auth.magic-email.title"})}),(0,o.jsx)(Nt,{children:d({id:"auth.magic-email.description"},{email:n})}),l,(0,o.jsx)(pe.N,{children:(void 0!==p||"success"===(null==u?void 0:u.status))&&(0,o.jsxs)(ge.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:[void 0!==p&&(0,o.jsx)(It,{variant:"error","data-test-id":"EmailSent.Error",children:a}),"success"===(null==u?void 0:u.status)&&void 0===p&&(0,o.jsx)(It,{variant:"success","data-test-id":"EmailSent.Success",children:null==u?void 0:u.message})]})}),(0,o.jsx)(_t,{sniperLink:b,isNewUserAccount:c}),(0,o.jsx)(fe.$,{size:"large",variant:"lightBlue",type:"button","data-test-id":"EmailSent.Resend",loading:"resending"===(null==u?void 0:u.status),disabled:"resending"===(null==u?void 0:u.status),onClick:()=>{m()},children:i})]})},Rt=_.Ay.div.withConfig({componentId:"sc-8ae78f90-0"})(["display:flex;justify-content:space-between;flex-direction:column;"]),Pt=_.Ay.div.withConfig({componentId:"sc-8ae78f90-1"})(["",""],ve.T.HeadingMedium),Ot=_.Ay.div.withConfig({componentId:"sc-8ae78f90-2"})(["",";margin:"," 0 "," 0;"],ve.T.Body2(),(0,P.a)(16),(0,P.a)(16)),Ft=(0,_.Ay)(K.F).withConfig({componentId:"sc-8ae78f90-3"})(["margin-bottom:",";"],(0,P.a)(16)),Dt=e=>{let{onLink:t}=e;const{formatMessage:i}=(0,f.tz)(),[n,a]=(0,s.useState)(),[r,l]=(0,s.useState)(!1),c=(0,s.useCallback)((async()=>{a(void 0),l(!0);const e=await t();l(!1),e.fold((()=>{}),a)}),[t]);return(0,o.jsxs)(Rt,{children:[(0,o.jsx)(Y.f,{aspectRatio:"3/2",src:ee.L.wide.existingAccount}),(0,o.jsx)(Pt,{children:i({id:"auth.link.title"})}),(0,o.jsx)(Ot,{children:i({id:"auth.link.description"})}),(0,o.jsx)(pe.N,{children:void 0!==n&&(0,o.jsx)(ge.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,o.jsx)(Ft,{variant:"error","data-test-id":"LinkAccount.Error",children:n})})}),(0,o.jsx)(fe.$,{size:"large",variant:"lightBlue",type:"button","data-test-id":"LinkAccount.Link",loading:r,disabled:r,onClick:()=>{c()},children:i({id:"auth.link.link-button"})})]})};var Bt=i(43536),Ht=i(99103),zt=i(15109),$t=i(68090);const qt=e=>`MarketingConsents.Consent-${e}`,Wt=_.I4.div.withConfig({componentId:"sc-fa1b2682-0"})(["display:flex;justify-content:space-between;flex-direction:column;"]),Gt=_.I4.h2.withConfig({componentId:"sc-fa1b2682-1"})([""," margin-bottom:",";"],ve.T.HeadingMedium,(0,z.a8)(16)),Zt=_.I4.div.withConfig({componentId:"sc-fa1b2682-2"})(["",""],ve.T.Body2()),Yt=_.I4.div.withConfig({componentId:"sc-fa1b2682-3"})(["padding-top:",";display:flex;flex-direction:column;"],(0,z.a8)(16)),Kt=_.I4.div.withConfig({componentId:"sc-fa1b2682-4"})(["display:flex;border-bottom:1px solid #e5e5e5;height:",";"],(0,z.a8)(80)),Jt=_.I4.div.withConfig({componentId:"sc-fa1b2682-5"})([""," display:flex;align-items:center;"],ve.T.Body1({weight:"bold"})),Qt=_.I4.a.withConfig({componentId:"sc-fa1b2682-6"})(["display:flex;margin-inline-start:",";"],(0,z.a8)(13)),Xt=(0,_.I4)($t.l).withConfig({componentId:"sc-fa1b2682-7"})(["width:",";height:",";fill:",";"],(0,z.a8)(16),(0,z.a8)(16),Bt.Tj.wolt100),ei=_.I4.div.withConfig({componentId:"sc-fa1b2682-8"})(["flex:1;display:flex;align-items:center;justify-content:flex-end;"]),ti=_.I4.div.withConfig({componentId:"sc-fa1b2682-9"})(["display:flex;padding:"," 0 "," 0;justify-content:center;"],(0,z.a8)(44),(0,z.a8)(42)),ii=_.I4.div.withConfig({componentId:"sc-fa1b2682-10"})(["display:flex;flex-direction:column;gap:",";"],(0,z.a8)(8)),oi=e=>{let{consents:t,country:i,isVisible:n,onSubmit:a,recaptcha:r,submitError:l,submitState:c}=e;const[d,u]=(0,s.useState)((()=>t.map((e=>{let{defaultValue:t,id:i}=e;return{id:i,value:t}})))),h="no-clicked"===c,m="yes-clicked"===c,p=h||m,g=d.every((e=>{let{value:t}=e;return!t})),b=d.every((e=>{let{value:t}=e;return t})),v=b?"auth.marketing-consents.yes-button":"auth.marketing-consents.next-button",C=(0,s.useRef)(),k=C.current;(0,s.useEffect)((()=>()=>{k&&clearTimeout(k)}),[k]),(0,F.B)(n?{name:"promoConsentsView",properties:{country:i}}:void 0);const w=(e,o)=>{x.Ep.promoConsentsDataConsents({country:i,promoConsentGiven:Object.fromEntries(o.flatMap((e=>{let{id:i,value:o}=e;var n;const a=null===(n=t.find((e=>e.id===i)))||void 0===n?void 0:n.slug;return void 0!==a?[[a,Number(o)]]:[]})))}),a(e,o)};return(0,o.jsxs)(Wt,{"data-test-id":"MarketingConsents",children:[(0,o.jsx)(Gt,{children:(0,o.jsx)(f.sA,{id:"auth.marketing-consents.title"})}),(0,o.jsx)(Zt,{children:(0,o.jsx)(f.sA,{id:"auth.marketing-consents.description"})}),r,(0,o.jsx)(Yt,{children:t.map((e=>{let{id:t,link:n,slug:a,text:r}=e;var s,l;return(0,o.jsxs)(Kt,{children:[(0,o.jsxs)(Jt,{children:[r,null!==n&&(0,o.jsx)(Qt,{"data-test-id":(l=t,`MarketingConsents.ConsentLink-${l}`),href:n.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>{x.Ep.promoConsentsInteractionReadTerms({country:i,legalTerms:a})},children:(0,o.jsx)(Xt,{"aria-label":n.ariaLabel})})]}),(0,o.jsx)(ei,{children:(0,o.jsx)(Ht.d,{checked:null===(s=d.find((e=>e.id===t)))||void 0===s?void 0:s.value,inputDataTestId:qt(t),onChange:e=>u((i=>i.map((i=>i.id===t?{id:t,value:e}:i))))})})]},t)}))}),(0,o.jsx)(ti,{children:(0,o.jsx)(zt._V,{src:`${y._.IMAGE_PROXY_URL}/static-assets/onboarding/marketing-consents/yuho_big_deal_1.png`})}),(0,o.jsxs)(ii,{children:[(0,o.jsx)(pe.N,{children:null!==l&&(0,o.jsx)(ge.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:(0,o.jsx)(K.F,{variant:"error","data-test-id":"MarketingConsents.SubmitError",children:l})})}),(0,o.jsx)($.$n,{loading:h,disabled:p,"data-test-id":"MarketingConsents.NoButton",onClick:()=>{if(x.Ep.promoConsentsInteractionSkipConsents({country:i}),g)w("no",d);else if(void 0===C.current){const e=d.map((e=>{let{id:t}=e;return{id:t,value:!1}}));u(e),C.current=setTimeout((()=>{w("no",e)}),200)}},size:"large",variant:"secondary",children:(0,o.jsx)(f.sA,{id:"auth.marketing-consents.no-button"})}),(0,o.jsx)($.$n,{loading:m,disabled:p,"data-test-id":"MarketingConsents.YesButton",onClick:()=>{w("yes",d)},size:"large",variant:"primary",children:(0,o.jsx)(f.sA,{id:v})})]})]})},ni=_.Ay.div.withConfig({componentId:"sc-1fffbfe0-0"})(["display:flex;justify-content:space-between;flex-direction:column;"]),ai=_.Ay.div.withConfig({componentId:"sc-1fffbfe0-1"})(["margin-bottom:",";"],(0,P.a)(24)),ri=_.Ay.h2.withConfig({componentId:"sc-1fffbfe0-2"})(["",""],ve.T.HeadingMedium),si=_.Ay.div.withConfig({componentId:"sc-1fffbfe0-3"})(["margin-top:",";",";"],(0,P.a)(16),ve.T.Body2()),li=_.Ay.div.withConfig({componentId:"sc-1fffbfe0-4"})(["display:flex;flex-direction:column;> *:not(:first-child){margin-top:",";}"],(0,P.a)(8)),ci=(0,_.Ay)(K.F).withConfig({componentId:"sc-1fffbfe0-5"})(["margin-bottom:",";"],(0,P.a)(8)),di=_.Ay.div.withConfig({componentId:"sc-1fffbfe0-6"})([""," display:flex;justify-content:center;color:",";padding:"," 0 "," 0;"],ve.T.Body3(),Ae.y.textSubdued,(0,P.a)(8),(0,P.a)(8)),ui=_.Ay.div.withConfig({componentId:"sc-1fffbfe0-7"})(["display:flex;align-items:center;margin-top:",";hr{flex:1 1 auto;border-color:",";}span{"," flex:0 0 auto;margin:0 ",";}"],(0,P.a)(16),(0,Ze.w$)({light:Ye.T.pepper12,lightHighContrast:Ye.T.pepper12,dark:Ye.T.salt12}),ve.T.Body3(),(0,P.a)(16)),hi=_.Ay.form.withConfig({componentId:"sc-1fffbfe0-8"})(["margin:0;display:flex;flex-direction:column;flex:1;> *:not(:first-child){margin-top:",";}"],(0,P.a)(16)),mi=_.Ay.span.withConfig({componentId:"sc-1fffbfe0-9"})(["padding-top:",";"," color:",";a{","}"],(0,P.a)(8),ve.T.Small(),Ae.y.textSubdued,ve.T.Small({weight:"semiBold"})),pi=e=>{let{children:t}=e;return(0,o.jsx)(ge.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:t})},gi=e=>{let{emailLoginError:t,facebookLoginStatus:i,isAppleLoading:n,isFacebookLoading:a,isSendingMagicEmail:r,onAppleLogin:l,onEmailLogin:c,onFacebookLogin:d,onGoogleLogin:u,onLineLogin:h,privacyPolicyUrl:m,onManageCookies:p,recaptcha:g,socialLoginError:b,subTitle:v,title:C,prompt:y,hideSubtitle:k}=e;var x;const S=(0,f.tz)(),{formatMessage:A}=S,E="on"===(0,w.u)("woltcom-auth-continue-with-email-text"),{formState:{errors:T},handleSubmit:j,register:N}=(0,X.g)({defaultValues:{email:""}}),I=(0,s.useCallback)((e=>!!(0,Ne.B9)(e)||A({id:"auth.method-select.error-invalid-email"})),[A]);return(0,o.jsxs)(ni,{children:[(0,o.jsxs)(ai,{children:[(0,o.jsx)(ri,{"data-test-id":"MethodSelect.Title",children:C}),void 0!==v&&!Boolean(k)&&(0,o.jsx)(si,{"data-test-id":"MethodSelect.SubTitle",children:v}),y]}),(0,o.jsxs)(li,{children:[g,(0,o.jsx)(pe.N,{children:void 0!==b&&(0,o.jsx)(pi,{children:(0,o.jsx)(ci,{variant:"error","data-test-id":"MethodSelect.SocialLoginError",children:b})})}),u&&(0,o.jsx)(wt,{variant:"google","data-test-id":"MethodSelect.Google",onClick:u,children:A({id:"auth.method-select.google-button"})}),l&&(0,o.jsx)(wt,{variant:"apple","data-test-id":"MethodSelect.Apple",loading:n,disabled:n,onClick:l,children:A({id:"auth.method-select.apple-button"})}),d&&(0,o.jsxs)(o.Fragment,{children:["requiresMarketingCookies"===i&&(0,o.jsx)(di,{"data-test-id":"MethodSelect.FacebookLoginStatus",children:(0,o.jsx)("span",{children:A({id:"auth.method-select.facebook-login-requires-marketing"},{a:e=>(0,o.jsx)(Ee.g,{onClick:e=>{e.preventDefault(),p()},children:e})})})}),(0,o.jsx)(wt,{variant:"facebook",loading:a,disabled:a||"requiresMarketingCookies"===i,"data-test-id":"MethodSelect.Facebook",onClick:d,children:A({id:"auth.method-select.facebook-button"})})]}),h&&(0,o.jsx)(wt,{variant:"line","data-test-id":"MethodSelect.Line",onClick:h,children:A({id:"auth.method-select.line-button"})}),void 0!==c&&(0,o.jsxs)(o.Fragment,{children:[(void 0!==l||void 0!==d||void 0!==u||void 0!==h)&&(0,o.jsxs)(ui,{"data-test-id":"MethodSelect.EmailOptionTitle",children:[(0,o.jsx)("hr",{"aria-hidden":!0}),(0,o.jsx)("span",{children:A({id:E?"auth.method-select.continue-email":"auth.method-select.or-email"})}),(0,o.jsx)("hr",{"aria-hidden":!0})]}),(0,o.jsxs)(hi,{"aria-labelledby":"step-method-select-email-title",onSubmit:e=>{j((e=>{let{email:t}=e;return c(t)}))(e)},children:[(0,o.jsx)(J.O,{errorMessage:null===(x=T.email)||void 0===x?void 0:x.message,errorMessageTestId:"MethodSelect.EmailInputError",children:(0,o.jsx)(q.pd,{id:"method-select-email",label:A({id:"auth.method-select.email-placeholder"}),"data-test-id":"MethodSelect.EmailInput",type:"email",...N("email",{validate:I})})}),(0,o.jsx)(pe.N,{children:void 0!==t&&(0,o.jsx)(pi,{children:(0,o.jsx)(K.F,{variant:"error","data-test-id":"MethodSelect.EmailLoginError",children:t})})}),(0,o.jsx)(fe.$,{size:"large",variant:"blue",type:"submit","data-test-id":"StepMethodSelect.NextButton",loading:r,disabled:r,children:A({id:"auth.method-select.next-button"})})]})]}),(0,o.jsxs)(mi,{"data-test-id":"MethodSelect.PrivacyPolicy",children:[A({id:"legal.privacy-statement"},{a:()=>(0,o.jsx)(Ee.g,{href:m,target:"_blank",rel:"noopener noreferrer",size:"inherit",children:A({id:"courier-signup.wolt-privacy-statement"})})})," ",A({id:"auth.method-select.hcaptcha-brand"},{a_pp:e=>(0,o.jsx)(Ee.g,{href:"https://hcaptcha.com/privacy",target:"_blank",rel:"noreferrer",size:"inherit",children:e}),a_tos:e=>(0,o.jsx)(Ee.g,{href:"https://hcaptcha.com/terms",target:"_blank",rel:"noreferrer",size:"inherit",children:e})})]})]})]})},fi=_.Ay.div.withConfig({componentId:"sc-79375cb1-0"})(["width:100%;max-width:",";margin:0 auto;margin-top:",";"],(0,z.a8)(375),(0,z.a8)(40)),bi=_.Ay.div.withConfig({componentId:"sc-79375cb1-1"})(["position:relative;height:0;padding-top:","%;overflow:hidden;"],2/3*100),vi=(0,_.Ay)(Y.f).withConfig({componentId:"sc-79375cb1-2"})(["position:absolute;top:0;left:0;height:100%;width:100%;"]),Ci=_.Ay.h2.withConfig({componentId:"sc-79375cb1-3"})([""," margin-top:",";"],W.Tg.HeadingMedium,(0,z.a8)(16)),yi=_.Ay.div.withConfig({componentId:"sc-79375cb1-4"})(["",";margin-top:",";"],W.Tg.Body2(),(0,z.a8)(16)),ki=e=>{let{bodyText:t,isVisible:i,titleText:n}=e;const{formatMessage:a}=(0,f.tz)();return(0,F.B)(i?{name:"phoneNumberInUseView"}:void 0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(fi,{children:(0,o.jsx)(bi,{children:(0,o.jsx)(vi,{aspectRatio:"3/2",src:ee.L.wide.girlGasp})})}),(0,o.jsx)(Ci,{"data-test-id":"PhoneNumberInUse.Title",children:n??a({id:"errors.catchall-header"})}),(0,o.jsx)(yi,{children:t??a({id:"errors.catchall-message"})})]})};var wi=i(47815),xi=i(7534);const Si=_.Ay.div.withConfig({componentId:"sc-59077164-0"})(["display:flex;justify-content:space-between;flex-direction:column;"]),Ai=_.Ay.h2.withConfig({componentId:"sc-59077164-1"})([""," margin:0;"],ve.T.HeadingMedium),Ei=_.Ay.div.withConfig({componentId:"sc-59077164-2"})(["",";margin:"," 0 "," 0;"],ve.T.Body2(),(0,P.a)(16),(0,P.a)(16)),Ti=(0,_.Ay)(K.F).withConfig({componentId:"sc-59077164-3"})(["margin-bottom:",";"],(0,P.a)(16)),ji=(0,_.Ay)(fe.$).withConfig({componentId:"sc-59077164-4"})(["margin-top:",";"],(0,P.a)(16)),Ni=e=>{let{description:t,isLoading:i=!1,hideLottie:n,onClickCodeNotReceived:a,onSubmitCode:r,onSuccess:l,recaptcha:c,submitError:d,successMessage:u}=e;const{formatMessage:h}=(0,f.tz)(),[m,p]=(0,s.useState)(),[g,b]=(0,s.useState)(!1),[v,C]=(0,s.useState)(!1),{setFocus:y,register:k,watch:w,reset:x}=(0,X.g)({defaultValues:{code:""}}),S=w("code")??"",A=(0,xi.Z)(S),E=d??m;return(0,s.useEffect)((()=>{g||(5===S.length&&A!==S?(p(void 0),C(!0),r(S).then((e=>(C(!1),e.fold((e=>{b(!0);const t=setTimeout((()=>l(e)),2e3);return()=>clearTimeout(t)}),(e=>(p(e),x(),y("code"),()=>{}))))))):S.length>=1&&0===(null==A?void 0:A.length)&&p(void 0))}),[S,A,v,g,r,l,x,y]),(0,o.jsxs)(Si,{children:[!1===n&&(0,o.jsx)(Y.f,{aspectRatio:"3/2",src:ee.L.wide.verifyEmail}),(0,o.jsx)(Ai,{children:h({id:"auth.verify-code.title"})}),(0,o.jsx)(Ei,{"data-test-id":"VerifyCode.SubTitle",children:t}),c,(0,o.jsx)(pe.N,{children:(void 0!==E||g)&&(0,o.jsxs)(ge.P.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:[void 0!==E&&(0,o.jsx)(Ti,{variant:"error","data-test-id":"VerifyCode.Error",children:E}),g&&(0,o.jsx)(Ti,{variant:"success","data-test-id":"VerifyCode.Success",children:u})]})}),(0,o.jsx)(wi.V,{pinLength:5,...k("code"),value:S,loading:v||i,disabled:v||i||g,inputDataTestId:"VerifyCode.CodeInput"}),(0,o.jsx)(ji,{size:"large",variant:"lightBlue",type:"button","data-test-id":"VerifyCode.CodeNotReceived",onClick:a,disabled:g,children:h({id:"auth.verify-code.no-code-button"})})]})};var Ii=i(38471),Mi=i(4497);const Vi=()=>{const e=(()=>{const e=(0,s.useRef)(!0);return(0,s.useEffect)((()=>()=>{e.current=!1}),[]),(0,s.useCallback)((()=>e.current),[])})(),{login:t}=(0,n.BG)(),[i,o]=(0,s.useState)(!0),r=(0,s.useCallback)((()=>{let t=0;const i=()=>{void 0!==window.AppleID?(window.AppleID.auth.init({clientId:y._.APPLE_CLIENT_ID,redirectURI:y._.APPLE_REDIRECT_URI,scope:"name email",usePopup:!0}),e()&&o(!1)):t<=3&&(setTimeout(i,200*t),t+=1)};i()}),[o,e]);(0,Mi.K)({src:"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",onLoad:r});const l=(0,s.useCallback)((async()=>{o(!0);try{const e=await(async e=>{var t,i;if(void 0===window.AppleID)throw new Error("Apple not initialized");await new Promise((e=>setTimeout(e,200)));const{authorization:{code:o,id_token:n},user:r}=await window.AppleID.auth.signIn(),{email:s}=(0,Ii.A)(n),l={appleAuthCode:o,appleIdToken:n,email:s,firstName:null==r||null===(t=r.name)||void 0===t?void 0:t.firstName,lastName:null==r||null===(i=r.name)||void 0===i?void 0:i.lastName};try{return await e({audience:"wolt-com",authorizationCode:o,grantType:"apple_authorization_code",identityToken:n}),v.w.of({status:"success"})}catch(e){var c,d;if((0,a.F0)(e)){var u;const t=null===(u=e.response)||void 0===u?void 0:u.data;return 148===(null==t?void 0:t.error_code)?v.w.of({status:"signupRequired",values:l}):v.H.of({error:(null==t?void 0:t.msg)??e.message,errorCode:void 0})}return v.H.of({error:e.message,errorCode:(0,a.F0)(e)?null==e||null===(d=e.response)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.error_code:void 0})}})(t);return e}catch(e){return v.H.of({error:e.message,errorCode:void 0})}finally{o(!1)}}),[t]);return{login:l,isLoading:i}},Li=async e=>{var t;if(!(null===(t=window.FB)||void 0===t?void 0:t.woltInitialized))throw new Error("Facebook not initialized");const i=await(async()=>{var e,t;const i=await new Promise((e=>FB.getLoginStatus(e)));return void 0!==(null===(e=i.authResponse)||void 0===e?void 0:e.accessToken)?i.authResponse.accessToken:null===(t=(await(o={scope:"email"},new Promise((e=>FB.login(e,o))))).authResponse)||void 0===t?void 0:t.accessToken;var o})();if(void 0===i)throw new Error;const o=await("/me",n={fields:"id,name,email"},new Promise((e=>{FB.api("/me",n,e)})));var n;const[r,s]=(e=>{const t=e?e.split(" "):[""];return[t[0]??"",t.slice(-1)[0]??""]})(o.name);try{return await e({grantType:"facebook_token",audience:"wolt-com",facebookToken:i}),v.w.of({status:"success"})}catch(e){var l,c,d,u;return(0,a.F0)(e)&&123===(null==e||null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.error_code)?v.w.of({status:"signupRequired",values:{email:o.email,firstName:r,lastName:s,facebookToken:i}}):v.H.of({error:e.message,errorCode:(0,a.F0)(e)?null==e||null===(u=e.response)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.error_code:void 0})}},_i=()=>{const{login:e}=(0,n.BG)(),[t,i]=(0,s.useState)(!1);return{login:(0,s.useCallback)((async()=>{i(!0);try{return await Li(e)}catch(e){return v.H.of({error:e.message,errorCode:void 0})}finally{i(!1)}}),[e]),isLoading:t}},Ui=3e4,Ri=(e,t)=>{const{formatMessage:i}=e;switch(t){case"login":return{title:i({id:"auth.method-select.login-title"}),subTitle:void 0};case"signup":return{title:i({id:"auth.method-select.signup-title"}),subTitle:void 0};case"signupOrLogin":return{title:i({id:"auth.method-select.title"}),subTitle:i({id:"auth.method-select.desktop-description"})}}},Pi=_.I4.div.withConfig({componentId:"sc-ecdfac77-0"})(["padding:",";"],(0,P.a)(16)),Oi="AuthModal.recaptcha",Fi=e=>{const{formatMessage:t}=(0,f.tz)();switch(e){case"error":return t({id:"auth.method-select.hcaptcha-error"});case"expired":return t({id:"auth.method-select.hcaptcha-expired"});default:return}};var Di=i(71607),Bi=i(5201),Hi=i(4703);const zi=`${y._.WOLT_AUTH_ENDPOINT_ABSOLUTE}/v1/wauth2/consumer-google?audience=${y._.WOLT_AUTH_AUDIENCE??"wolt-com"}`,$i=(e,t)=>{var i,o;const n=t,a=(null===(i=n.response)||void 0===i?void 0:i.status)??500,r=null===(o=n.response)||void 0===o?void 0:o.data,s=(null==r?void 0:r.msg)??(null==r?void 0:r.message)??(null==r?void 0:r.error);return a>=400&&a<500&&void 0!==s?s:e({id:"errors.generic-server"})},qi=e=>{var t;if(!(0,a.F0)(e))return{errorCode:null,title:null,msg:null};const i=r.partial({error_code:r.number,msg:r.string,title:r.string}).is(null===(t=e.response)||void 0===t?void 0:t.data)?e.response.data:void 0;return{errorCode:(null==i?void 0:i.error_code)??null,msg:(null==i?void 0:i.msg)??null,title:(null==i?void 0:i.title)??null}},Wi=e=>{const t=(e=>{let{createModalNavigationStack:t=c.g,useAppleLogin:i=Vi,useFacebookLogin:n=_i,useRecaptcha:a=R.V,useCreateAccountConsents:l,useMarketingConsents:u,Modal:h=d.a}=e;const m=t({index:{title:e=>{let{intl:t,flow:i}=e;return Ri(t,i).title},titleVisibility:"onScroll",screen:e=>{let{authMethods:t,facebookLoginStatus:c,flow:d,intl:u,initialSocialLoginError:h,navigation:m,onAppleLogin:p,onChangeAuthState:g,onCheckIfLinkableExistingAccount:f,onClose:v,onFacebookLogin:C,onGoogleLogin:y,onLineLogin:k,onManageCookies:w,onSendMagicEmail:A,privacyPolicyUrl:E,isVisible:T,prompt:j,hideSubtitle:N}=e;const I=(0,S.yl)(),{formatMessage:M}=u,[,V]=(0,U.S0)("hasActiveMagicLink",r.boolean),[L,_]=(0,s.useState)(),[R,P]=(0,s.useState)(!1),[O,D]=(0,s.useState)(h),{login:B,isLoading:H}=i(),{login:z,isLoading:$}=n();l({country:void 0,shouldEnableOneClickConsents:!1}),(0,F.B)(T?{name:"loginOptionsView",properties:{source:"login_options",loginOptionsList:t,guestVisitAllowed:!0}}:void 0);const q=(0,s.useMemo)((()=>{if(t.includes("apple"))return async()=>{I({type:"loginStarted",payload:{method:"apple"}}),x.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"apple"}),D(void 0);const e=await B();await e.fold((async e=>{if(x.Ep.loginDataLoginCompleted({loginMethod:"apple",isNewUserAccount:"signupRequired"===e.status}),"success"===e.status)p({success:!0}),null==v||v();else if("signupRequired"===e.status){const{values:t}=e,i={authCode:t.appleAuthCode,method:"apple",value:t.appleIdToken};(await f({authToken:i,email:t.email,method:"apple"})).fold((e=>{e?(g({authToken:i,email:t.email,linkId:e.linkId,linkVerifyRequired:e.verifyRequired}),m.goTo("linkAccount")):(g({authToken:i,email:t.email,firstName:t.firstName,lastName:t.lastName}),m.goTo("createAccount"))}),D)}}),(async e=>{let{error:t,errorCode:i}=e;D(t),p({success:!1,errorCode:i,error:t})}))}}),[I,t,B,p,g,f,v,m]),W=(0,s.useMemo)((()=>{if(t.includes("facebook"))return async()=>(I({type:"loginStarted",payload:{method:"facebook"}}),x.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"facebook"}),D(void 0),(await z()).fold((async e=>{if(x.Ep.loginDataLoginCompleted({loginMethod:"facebook",isNewUserAccount:"signupRequired"===e.status}),"success"===e.status)C({success:!0}),null==v||v();else if("signupRequired"===e.status){const{values:t}=e,{email:i,firstName:o,lastName:n,facebookToken:a}=t;if(void 0===i)return void D(M({id:"auth.signup.error-no-email"}));const r={method:"facebook",value:a};(await f({authToken:r,email:i,method:"facebook"})).fold((e=>{e?(g({authToken:r,email:i,linkId:e.linkId,linkVerifyRequired:e.verifyRequired}),m.goTo("linkAccount")):(g({authToken:{method:"facebook",value:a},email:i,firstName:o,lastName:n}),m.goTo("createAccount"))}),D)}}),(async e=>{let{error:t,errorCode:i}=e;D(t),C({success:!1,errorCode:i,error:t})})))}),[I,t,M,z,m,g,f,v,C]),G=(0,s.useMemo)((()=>{if(t.includes("google"))return()=>{I({type:"loginStarted",payload:{method:"google"}}),x.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"google"}),y()}}),[I,t,y]),Z=(0,s.useMemo)((()=>{if(t.includes("line"))return()=>{I({type:"loginStarted",payload:{method:"line"}}),x.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"line"}),k()}}),[I,t,k]),{recaptchaStatus:Y,runRecaptcha:K}=a(Oi),J=Fi(Y),Q=(0,s.useMemo)((()=>{if(t.includes("email"))return async e=>{I({type:"loginStarted",payload:{method:"email"}}),x.Ep.loginOptionsInteractionChooseLoginMethod({loginMethod:"email"});const t=await K();_(void 0),P(!0);const i=await A({email:e,recaptchaResult:t});P(!1),i.fold((t=>{x.Ep.sessionEmailSubmitted({isEmailVerified:"signupRequired"!==t.status,isNewUserAccount:"magicLinkSent"!==t.status||t.isNewUserAccount,isUnverifiedEmailFlow:"signupRequired"===t.status}),"signupRequired"===t.status?(g({email:e,isNewUserAccount:!0}),m.goTo("skipEmailVerificationCreateAccount")):"magicLinkSent"===t.status?(V(!0),g({email:e,isNewUserAccount:t.isNewUserAccount}),m.goTo("emailSent")):(0,b.d)(t)}),_)}}),[V,I,t,m,g,A,K]);return(0,o.jsx)(Pi,{children:(0,o.jsx)(gi,{emailLoginError:L??J,facebookLoginStatus:c,isAppleLoading:H,isFacebookLoading:$,isSendingMagicEmail:R||"busy"===Y,onAppleLogin:q,onFacebookLogin:W,onGoogleLogin:G,onLineLogin:Z,onEmailLogin:Q,onManageCookies:w,privacyPolicyUrl:E,recaptcha:(0,o.jsx)("div",{id:Oi}),socialLoginError:O,prompt:j,hideSubtitle:N,...Ri(u,d)})})}},emailSent:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.magic-email.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,intl:i,onSendMagicEmail:n}=e;const r=null==t?void 0:t.email;if(void 0===r)throw Error("email missing");const{recaptchaStatus:l,runRecaptcha:c}=a(Oi),d=Fi(l),u=(0,s.useCallback)((async()=>{const e=await c();return await n({email:r,recaptchaResult:e})}),[r,n,c]);return(0,o.jsx)(Pi,{children:(0,o.jsx)(Ut,{animation:"verifyEmail",buttonText:i.formatMessage({id:"auth.magic-email.resend-button"}),email:r,error:d,onResendEmail:u,recaptcha:(0,o.jsx)("div",{id:Oi}),isNewUserAccount:t.isNewUserAccount??!1})})}},createAccount:{isGoBackDisabled:e=>{let{authState:t}=e;var i,o,n;return"line"===(null===(i=t.authToken)||void 0===i?void 0:i.method)||"google"===(null===(o=t.authToken)||void 0===o?void 0:o.method)||"email"===(null===(n=t.authToken)||void 0===n?void 0:n.method)},title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.create-account.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,countries:i,initialCountryData:n,isVisible:r,navigation:c,onChangeAuthState:d,onSignup:u,privacyPolicyUrl:h,referralCode:m,shouldEnableOneClickConsents:p,termsUrl:g}=e;const[{isSubmitting:f,submitError:v},C]=(0,s.useState)({isSubmitting:!1}),{recaptchaStatus:y,runWithRecaptcha:k}=a(Oi),{authToken:w}=t,x=(0,s.useCallback)(((e,t)=>{var i;void 0!==w&&(i=async i=>{C({isSubmitting:!0}),(await u({flow:"authToken",...e,authToken:w,recaptchaResult:i,referralCode:m??e.referralCode})).fold((i=>{if(C({isSubmitting:!1}),"linkAccount"===i.status)d({authToken:w,linkId:i.linkId,linkVerifyRequired:i.verifyRequired,phoneNumber:e.phoneNumber}),c.goTo("linkAccount");else if("magicLinkSent"===i.status)d((e=>({...e,phoneNumberInUseResult:{titleText:i.titleText,bodyText:i.bodyText}}))),c.goTo("phoneNumberInUse");else if("verifyPhoneNumber"===i.status){if(d({authToken:w,country:e.country,isNewUserAccount:i.isNewUserAccount,phoneNumber:e.phoneNumber}),t.isOneClickConsentFlow)return void c.goTo("marketingConsents");c.goTo("verifyPhoneNumber")}else"accountCreated"===i.status?O.J.addError("Received unexpected `accountCreated` when signing up without SMS token",{method:w.method}):(0,b.d)(i)}),(e=>C({isSubmitting:!1,submitError:e})))},"email"===(null==w?void 0:w.method)?k(i):i(void 0))}),[w,c,d,u,m,k]),S=Fi(y);return(0,o.jsx)(Pi,{children:(0,o.jsx)(qe,{useConsents:l,countries:i,initialFirstName:null==t?void 0:t.firstName,initialLastName:null==t?void 0:t.lastName,initialCountry:n.country,initialPhoneNumberCountryCode:n.phoneNumberCountryCode,isReferralCodeInputVisible:!1,isSubmitting:f||"busy"===y,isVisible:r,onSubmit:x,recaptcha:(0,o.jsx)("div",{id:Oi}),privacyPolicyUrl:h,shouldEnableOneClickConsents:p,submitError:v??S,termsUrl:g,isSkipEmailVerification:!1})})}},phoneNumberInUse:{title:e=>{let{authState:t,intl:i}=e;var o;return(null===(o=t.phoneNumberInUseResult)||void 0===o?void 0:o.titleText)??i.formatMessage({id:"errors.catchall-header"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,isVisible:i}=e;var n,a;return(0,o.jsx)(Pi,{children:(0,o.jsx)(ki,{bodyText:(null===(n=t.phoneNumberInUseResult)||void 0===n?void 0:n.bodyText)??null,isVisible:i,titleText:(null===(a=t.phoneNumberInUseResult)||void 0===a?void 0:a.titleText)??null})})}},linkAccount:{isGoBackDisabled:!0,title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.link.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,navigation:i,onClose:n,onVerifyLinkAccount:a,onSendLinkAccountVerificationCode:r}=e;const{authToken:l,linkId:c,linkVerifyRequired:d}=t,u=(0,s.useCallback)((async()=>{if(void 0===l||void 0===c)throw new Error("authToken or linkId missing in handleOnLink");const{method:e}=l;if("email"===e)throw new Error("email not allowed in handleOnLink");if(!0===d)return i.goTo("verifyLinkAccount"),await r({method:e,linkId:c}),v.w.of("ok");{const t=await a({authToken:l,code:void 0,method:e,linkId:c});return t.fold((()=>null==n?void 0:n()),(()=>{})),t}}),[l,c,d,i,n,a,r]);return(0,o.jsx)(Pi,{children:(0,o.jsx)(Dt,{onLink:u})})}},marketingConsents:{isGoBackDisabled:e=>{let{authState:t}=e;return!0===t.phoneNumberVerified},title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.marketing-consents.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:{country:t,phoneNumberVerified:i=!1},navigation:n,isVisible:a,onClose:r,onModifyUserConsents:l}=e;const c=u({country:t}),[d,h]=(0,s.useState)(),[{isSubmitting:m,submitError:p},g]=(0,s.useState)({isSubmitting:!1});return t?(0,o.jsx)(Pi,{children:(0,o.jsx)(oi,{consents:c??[],country:t,isVisible:a,onSubmit:async(e,t)=>{h(e),(await l(t)).fold((()=>{if(g({isSubmitting:!1}),i)return null==r?void 0:r();n.goTo("verifyPhoneNumber")}),(e=>g({isSubmitting:!1,submitError:e})))},recaptcha:(0,o.jsx)("div",{id:Oi}),submitError:p??null,submitState:m?"yes"===d?"yes-clicked":"no-clicked":"idle"})}):null}},verifyLinkAccount:{isGoBackDisabled:!0,title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.verify-code.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,intl:i,navigation:n,onClose:a,onVerifyLinkAccount:r}=e;const{formatMessage:l}=i,{authToken:c,email:d,linkId:u,phoneNumber:h}=t;if(void 0===u||void 0===c)throw Error("linkId or authToken missing in VerifyLinkAccount");const{method:m}=c;if("email"===m)throw Error("email method in VerifyLinkAccount");const p=(0,s.useCallback)((async e=>r({authToken:c,code:e,linkId:u,method:m})),[c,u,m,r]),g=(0,s.useCallback)((()=>null==a?void 0:a()),[a]);return(0,o.jsx)(Pi,{children:(0,o.jsx)(Ni,{description:l({id:void 0!==d&&void 0!==h?"auth.link-verify.description-both":"auth.link-verify.description-single"},{email:d,phoneNumber:h,emailOrPhoneNumber:d??h}),onClickCodeNotReceived:()=>n.goTo("verifyLinkAccountCodeNotReceived"),onSubmitCode:p,onSuccess:g,successMessage:l(void 0===h?{id:"auth.verify-code.success-email"}:void 0===d?{id:"auth.verify-code.success-phone"}:{id:"auth.verify-code.success"})})})}},verifyLinkAccountCodeNotReceived:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.code-not-received.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,navigation:i,onChangeAuthState:n,onContactSupport:a,onSendLinkAccountVerificationCode:r}=e;const l=(0,s.useCallback)((async()=>{const{authToken:e,linkId:o}=t;if(void 0===o||void 0===e)throw Error("linkId or authToken missing");if("email"===e.method)throw Error("invalid auth method");const a=await r({method:e.method,linkId:o});return a.fold((()=>{n({...t,verificationCodeCooldownUntil:Date.now()+Ui}),i.goBack()}),(()=>{})),a}),[t,i,n,r]),c=t.verificationCodeCooldownUntil,d=Date.now(),u=void 0!==c&&c>d?(c-d)/1e3:void 0;return(0,o.jsx)(Pi,{children:(0,o.jsx)(Se,{onContactSupport:a,onSendAgain:l,sendAgainCooldownSeconds:u})})}},verifyPhoneNumber:{isGoBackDisabled:!0,title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.verify-code.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,intl:i,isVisible:n,navigation:a,onClose:r,onVerifyPhoneNumber:l,geoIpCountryCode3:c}=e;const{formatMessage:d}=i,u=(0,s.useCallback)((()=>{x.Ep.enterVerificationCodeInteractionCodeNotReceived({isNewUserAccount:t.isNewUserAccount??!1,isUnverifiedEmailFlow:!1}),a.goTo("verifyPhoneNumberCodeNotReceived")}),[t.isNewUserAccount,a]),h=(0,s.useCallback)((async e=>await l({code:e,isNewUserAccount:t.isNewUserAccount??!1})),[t.isNewUserAccount,l]);(0,s.useEffect)((()=>{x.Ep.enterPhoneNumberInteractionSendCode({detectedCountry:c??null,isNewUserAccount:!0,isUnverifiedEmailFlow:!1,selectedCountry:t.country??null})}),[t.country,c]);const m=(0,s.useCallback)((()=>null==r?void 0:r()),[r]);return(0,F.B)(n?{name:"enterVerificationCodeView",properties:{source:null,isNewUserAccount:t.isNewUserAccount??!1,isUnverifiedEmailFlow:!1}}:void 0),(0,o.jsx)(Pi,{children:(0,o.jsx)(Ni,{description:d({id:"auth.verify-number.description"},{phoneNumber:t.phoneNumber??""}),onClickCodeNotReceived:u,onSubmitCode:h,onSuccess:m,successMessage:d({id:"auth.verify-code.success-phone"})})})}},verifyPhoneNumberCodeNotReceived:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.code-not-received.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,navigation:i,onChangeAuthState:n,onContactSupport:a,onResendPhoneNumberVerificationCode:r,signupEditPhoneNumberEnabled:l}=e;const c=(0,S.yl)(),d=(0,s.useCallback)((()=>{i.goTo("changePhoneNumber")}),[i]),u=(0,s.useCallback)((()=>{a(),c({type:"phoneNumberVerificationContactSupport"})}),[c,a]),h=(0,s.useCallback)((async()=>{if(void 0===t.phoneNumber)throw Error("phone number missing");const e=await r();return e.fold((()=>{x.Ep.codeNotReceivedInteractionResendCode(),n({...t,verificationCodeCooldownUntil:Date.now()+Ui}),i.goBack()}),(()=>{})),e}),[t,i,n,r]),m=t.verificationCodeCooldownUntil,p=Date.now(),g=void 0!==m&&m>p?(m-p)/1e3:void 0;return(0,o.jsx)(Pi,{children:(0,o.jsx)(Se,{onChangePhoneNumber:l?d:void 0,onContactSupport:u,onSendAgain:h,sendAgainCooldownSeconds:g})})}},changePhoneNumber:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.change-phone-number.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:{phoneNumber:t},onChangeAuthState:i,onChangePhoneNumber:n,navigation:a}=e;const[r,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),u=(0,s.useCallback)((async e=>{d(null),l(!0),(await n(e)).fold((()=>{i({phoneNumber:e}),a.goTo("verifyPhoneNumber")}),(e=>{d(e),l(!1)}))}),[a,i,n]);return(0,o.jsx)(Pi,{children:(0,o.jsx)(me,{errorMessage:c,initialPhoneNumber:void 0!==t?t:null,isLoading:r,onSubmit:u})})}},skipEmailVerificationCreateAccount:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.create-account.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,countries:i,initialCountryData:n,isVisible:a,navigation:r,onChangeAuthState:c,onSkipEmailVerificationSendSms:d,privacyPolicyUrl:u,shouldEnableOneClickConsents:h,termsUrl:m}=e;const[{isSubmitting:p,submitError:g},f]=(0,s.useState)({isSubmitting:!1}),v=(0,s.useCallback)((async(e,t)=>{void 0!==e.phoneNumber&&(f({isSubmitting:!0}),(await d(e.phoneNumber)).fold((i=>{c((o=>({...o,signupValues:e,country:e.country,phoneNumber:e.phoneNumber,isOneClickConsentFlow:t.isOneClickConsentFlow,phoneNumberInUseResult:"magicLinkSent"===i.status?{titleText:i.titleText,bodyText:i.bodyText}:void 0}))),"magicLinkSent"===i.status?r.goTo("phoneNumberInUse"):"smsSent"===i.status?r.goTo("skipEmailVerificationVerifyPhoneNumber"):(0,b.d)(i),f({isSubmitting:!1})}),(e=>{f({isSubmitting:!1,submitError:e})})))}),[r,c,d]);return(0,o.jsx)(Pi,{children:(0,o.jsx)(qe,{useConsents:l,countries:i,initialFirstName:null==t?void 0:t.firstName,initialLastName:null==t?void 0:t.lastName,initialCountry:n.country,initialPhoneNumberCountryCode:n.phoneNumberCountryCode,isReferralCodeInputVisible:!1,isSubmitting:p,isVisible:a,onSubmit:v,recaptcha:(0,o.jsx)("div",{id:Oi}),privacyPolicyUrl:u,shouldEnableOneClickConsents:h,submitError:g,termsUrl:m,isSkipEmailVerification:!0})})}},skipEmailVerificationVerifyPhoneNumber:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.verify-code.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,intl:i,isVisible:n,navigation:r,onClose:l,onSignup:c,onChangeAuthState:d,referralCode:u,geoIpCountryCode3:h}=e;const{formatMessage:m}=i,{recaptchaStatus:p,runWithRecaptcha:g}=a(Oi),f=(0,s.useCallback)((()=>{x.Ep.enterVerificationCodeInteractionCodeNotReceived({isNewUserAccount:!0,isUnverifiedEmailFlow:!0}),r.goTo("skipEmailVerificationVerifyPhoneNumberCodeNotReceived")}),[r]),b=(0,s.useCallback)((async e=>{const{email:i,signupValues:o}=t;if(!o||void 0===i)throw new Error("signupValues or email missing in handleOnSubmitCode");return g((async t=>{if(""===t)return v.H.of(m({id:"errors.generic-server"}));const n=await c({flow:"smsToken",...o,recaptchaResult:t,referralCode:u??o.referralCode,smsToken:e,email:i});return"success"===n.type&&"accountCreated"===n.value.status?(x.Ep.enterVerificationCodeDataPhoneVerified({isNewUserAccount:!0,isEmailVerified:!1,isUnverifiedEmailFlow:!0}),v.w.of("ok")):"failure"===n.type?n:(O.J.addError(`Received unexpected \`${n.value.status}\` when doing skip email verification signup`),v.H.of(m({id:"errors.generic-server"})))}))}),[t,m,c,u,g]);(0,s.useEffect)((()=>{x.Ep.enterPhoneNumberInteractionSendCode({detectedCountry:h??null,isNewUserAccount:!0,isUnverifiedEmailFlow:!0,selectedCountry:t.country??null})}),[t.country,h]);const C=(0,s.useCallback)((()=>{if(t.isOneClickConsentFlow)return d((e=>({...e,isNewUserAccount:!0,phoneNumberVerified:!0}))),void r.goTo("marketingConsents");null==l||l()}),[t.isOneClickConsentFlow,l,d,r]),y=(()=>{const{pathname:e}=(0,D.zy)(),t=(0,s.useMemo)((()=>(0,B.e)(e)),[e]),i=(0,H.u)(null==t?void 0:t.name),o=(0,s.useRef)();(0,s.useEffect)((()=>{i&&i!==o.current&&(o.current=i)}),[i]);return o.current&&(e=>Object.values(x.kL).includes(e))(o.current)?o.current:null})();(0,F.B)(n?{name:"enterVerificationCodeView",properties:{source:y,isNewUserAccount:!0,isUnverifiedEmailFlow:!0}}:void 0);const k=Fi(p);return(0,o.jsx)(Pi,{children:(0,o.jsx)(Ni,{description:m({id:"auth.verify-number.description"},{phoneNumber:t.phoneNumber??""}),isLoading:"busy"===p,onClickCodeNotReceived:f,onSubmitCode:b,onSuccess:C,recaptcha:(0,o.jsx)("div",{id:Oi}),submitError:k,successMessage:m({id:"auth.verify-code.success-phone"}),hideLottie:!0})})}},skipEmailVerificationVerifyPhoneNumberCodeNotReceived:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.code-not-received.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,navigation:i,onChangeAuthState:n,onContactSupport:a,onSkipEmailVerificationSendSms:r}=e;const l=(0,S.yl)(),c=(0,s.useCallback)((()=>{a(),l({type:"phoneNumberVerificationContactSupport"})}),[l,a]),d=(0,s.useCallback)((async()=>{if(void 0===t.phoneNumber)throw Error("phone number missing");const e=await r(t.phoneNumber);return e.fold((e=>{if("smsSent"===e.status)x.Ep.codeNotReceivedInteractionResendCode(),n({...t,verificationCodeCooldownUntil:Date.now()+Ui}),i.goBack();else{if("magicLinkSent"===e.status)throw O.J.addError("Received unexpected `magicLinkSent` when resending skip email verification SMS"),Error("unexpected magic link sent");(0,b.d)(e)}}),(()=>{})),e}),[t,i,n,r]),u=t.verificationCodeCooldownUntil,h=Date.now(),m=void 0!==u&&u>h?(u-h)/1e3:void 0;return(0,o.jsx)(Pi,{children:(0,o.jsx)(Se,{hideLottie:!0,onContactSupport:c,onSendAgain:d,sendAgainCooldownSeconds:m})})}},skipEmailVerificationVerifyEmail:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.verify-code.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,intl:i,isVisible:n,navigation:a,onClose:r,onSkipEmailVerificationVerifyEmail:l,geoIpCountryCode3:c}=e;const{formatMessage:d}=i,u=(0,s.useCallback)((()=>{x.Ep.enterVerificationCodeInteractionCodeNotReceived({isNewUserAccount:!1,isUnverifiedEmailFlow:!0}),a.goTo("skipEmailVerificationVerifyEmailCodeNotReceived")}),[a]),h=(0,s.useCallback)((async e=>{if(!t.authToken)throw new Error("authToken missing in handleOnSubmitCode");return l({code:e,authToken:t.authToken})}),[t.authToken,l]),m=(0,s.useCallback)((()=>{x.Ep.enterVerificationCodeDataPhoneVerified({isNewUserAccount:!1,isEmailVerified:!1,isUnverifiedEmailFlow:!0}),null==r||r()}),[r]);return(0,s.useEffect)((()=>{x.Ep.enterPhoneNumberInteractionSendCode({detectedCountry:c??null,isNewUserAccount:!1,isUnverifiedEmailFlow:!0,selectedCountry:t.country??null})}),[t.country,c]),(0,F.B)(n?{name:"enterVerificationCodeView",properties:{source:null,isNewUserAccount:!1,isUnverifiedEmailFlow:!0}}:void 0),(0,o.jsx)(Pi,{children:(0,o.jsx)(Ni,{description:d({id:"auth.verify-number.description"},{phoneNumber:t.phoneNumber??""}),hideLottie:!0,onClickCodeNotReceived:u,onSubmitCode:h,onSuccess:m,successMessage:d({id:"auth.verify-code.success-phone"})})})}},skipEmailVerificationVerifyEmailCodeNotReceived:{title:e=>{let{intl:t}=e;return t.formatMessage({id:"auth.code-not-received.title"})},titleVisibility:"onScroll",screen:e=>{let{authState:t,navigation:i,onChangeAuthState:n,onContactSupport:a,onSkipEmailVerificationResendEmailVerificationSms:r}=e;const l=(0,S.yl)(),c=(0,s.useCallback)((()=>{a(),l({type:"phoneNumberVerificationContactSupport"})}),[l,a]),d=(0,s.useCallback)((async()=>{if(void 0===t.authToken)throw Error("auth token missing");const e=await r(t.authToken);return e.fold((()=>{x.Ep.codeNotReceivedInteractionResendCode(),n({...t,verificationCodeCooldownUntil:Date.now()+Ui}),i.goBack()}),(()=>{})),e}),[t,i,n,r]),u=t.verificationCodeCooldownUntil,h=Date.now(),m=void 0!==u&&u>h?(u-h)/1e3:void 0;return(0,o.jsx)(Pi,{children:(0,o.jsx)(Se,{hideLottie:!0,onContactSupport:c,onSendAgain:d,sendAgainCooldownSeconds:m})})}}});return e=>{let{authMethods:t,countries:i,facebookLoginStatus:n,flow:a,initialCountryData:r,initialState:l,isModalOpen:c,onAppleLogin:d,onClose:u,onChangePhoneNumber:p,onCheckIfLinkableExistingAccount:g,onContactSupport:b,onFacebookLogin:v,onGoogleLogin:C,onLineLogin:y,onManageCookies:k,onModifyUserConsents:w,onSendLinkAccountVerificationCode:x,onResendPhoneNumberVerificationCode:S,onSendMagicEmail:A,onSkipEmailVerificationResendEmailVerificationSms:E,onSkipEmailVerificationSendSms:T,onSignup:j,onSkipEmailVerificationVerifyEmail:N,onVerifyLinkAccount:I,onVerifyPhoneNumber:M,privacyPolicyUrl:V,referralCode:L,shouldDisableBackdropClose:_,shouldEnableOneClickConsents:U,signupEditPhoneNumberEnabled:R,termsUrl:P,prompt:O,hideSubtitle:F,geoIpCountryCode3:D}=e;const B=(0,f.tz)(),[H,z]=(0,s.useState)({});return(0,s.useEffect)((()=>{void 0!==l&&("verifyPhoneNumber"===l.screen?z({phoneNumber:l.phoneNumber}):"createAccount"!==l.screen&&"linkAccount"!==l.screen&&"skipEmailVerificationVerifyEmail"!==l.screen||z(l.state))}),[l]),(0,o.jsx)(h,{show:c,onRequestClose:u,shouldCloseOnBackdropClick:!_,responsivenessConfigs:{desktop:{maxWidth:500,maxHeight:800,modalType:"centered",animationStyle:"default"}},children:(0,o.jsx)(m,{authMethods:t,authState:H,autoResize:!0,countries:i,facebookLoginStatus:n,flow:a,initialScreen:null==l?void 0:l.screen,initialSocialLoginError:"index"===(null==l?void 0:l.screen)?l.initialSocialLoginError:void 0,initialCountryData:r,intl:B,onAppleLogin:d,onChangeAuthState:z,onChangePhoneNumber:p,onCheckIfLinkableExistingAccount:g,onClose:u,onContactSupport:b,onFacebookLogin:v,onGoogleLogin:C,onLineLogin:y,onManageCookies:k,onModifyUserConsents:w,onSendMagicEmail:A,onSignup:j,onSkipEmailVerificationResendEmailVerificationSms:E,onSkipEmailVerificationSendSms:T,onSendLinkAccountVerificationCode:x,onResendPhoneNumberVerificationCode:S,onSkipEmailVerificationVerifyEmail:N,onVerifyLinkAccount:I,onVerifyPhoneNumber:M,privacyPolicyUrl:V,referralCode:L,termsUrl:P,shouldEnableOneClickConsents:U,signupEditPhoneNumberEnabled:R,prompt:O,hideSubtitle:F,geoIpCountryCode3:D})})}})(e);return e=>{let{getMagicEmailAttribution:i,onManageCookies:r,overrideUseAuthModalState:c,handleSupport:d}=e;const{data:{countryCode2:_,countryCode3:U}}=(0,u.MU)(),[R,P]=(c??Di.Yt)(),O=(()=>{const{login:e}=(0,n.BG)();return t=>{const i=y._.WOLT_AUTH_AUDIENCE??"wolt-com",{method:o,value:n}=t;return"apple"===o?void 0===t.authCode?Promise.reject():e({audience:i,grantType:"apple_authorization_code",authorizationCode:t.authCode,identityToken:n}):"email"===o?e({audience:i,grantType:"email_login",token:n}):"facebook"===o?e({audience:i,grantType:"facebook_token",facebookToken:n}):"google"===o?e({audience:i,grantType:"google_token",googleToken:n}):"line"===o?e({audience:i,grantType:"line_token",lineToken:n}):"user_creation_token"===o?e({audience:i,grantType:"user_creation_token",token:n}):((0,b.d)(o),Promise.reject(new Error(`unknown method: ${o}`)))}})(),F=(0,h.S)(),{authMethods:D,email:B,flow:H,initialState:z,isModalOpen:$,referralCode:q,userFlow:W,prompt:G,hideSubtitle:Z}=R,{formatMessage:Y,locale:K}=(0,f.tz)(),{consents:J}=(0,k.uC)(),Q="on"===(0,w.u)("woltwide-1-click-consents-for-sign-up-on-web"),X="on"===(0,w.u)("woltcom-auth-signup-edit-phone-number"),ee="treatment"===(0,w.ut)("woltcom-auth-modal-disable-backdrop-close",$),te=J.marketing?void 0:"requiresMarketingCookies",ie=(()=>{const e=(0,g.K)();return(0,s.useMemo)((()=>e.map((e=>{let{value:t,label:i}=e;return{code:t,label:i}}))),[e])})(),oe=(0,s.useMemo)((()=>({country:U??"FIN",phoneNumberCountryCode:_??"FI"})),[_,U]),ne=(0,s.useCallback)((async e=>{let{authToken:t,email:i,method:o}=e;try{const{value:e}=t,n=await(0,L.a)(o,{apple:"apple"===o?{identity_token:e}:void 0,google_token:"google"===o?e:void 0,facebook_token:"facebook"===o?e:void 0,line_token:"line"===o?e:void 0,email:i,phone_number:void 0});return v.w.of({status:"linkAccount",verifyRequired:n.data.requires_verification,linkId:n.data.new_login_method_identifier})}catch(e){var n;const t=e;return 404===(null===(n=t.response)||void 0===n?void 0:n.status)?v.w.of(void 0):v.H.of($i(Y,t))}}),[Y]),ae=(0,s.useCallback)((()=>{P((e=>({...e,isModalOpen:!1})))}),[P]),re=(0,s.useCallback)((()=>{ae(),r()}),[ae,r]),se=(0,s.useCallback)((async e=>{try{return await(0,l.N)(e.map((e=>{let{id:t,value:i}=e;return{consent_id:t,value:i}}))),v.w.of("ok")}catch(e){const t=e;return v.H.of($i(Y,t))}}),[Y]),le=(0,S.yl)(),ce=(0,s.useCallback)((e=>{e.success?(x.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!1}),le({type:"loginCompleted",payload:{method:"apple"}})):(x.Ep.loginErrorLoginResult({errorMessage:e.error,loginMethod:"apple"}),le({type:"loginFailed",payload:{error:e.error,errorCode:String(e.errorCode??0),method:"apple"}}))}),[le]),de=(0,s.useCallback)((e=>{e.success?(x.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!1}),le({type:"loginCompleted",payload:{method:"facebook"}})):(x.Ep.loginErrorLoginResult({errorMessage:e.error,loginMethod:"facebook"}),le({type:"loginFailed",payload:{error:e.error,errorCode:String(e.errorCode??0),method:"facebook"}}))}),[le]),ue=(0,s.useCallback)((()=>{window.location.href=zi}),[]),he=(0,s.useCallback)((()=>{window.location.href=(e=>`${y._.WOLT_AUTH_ENDPOINT}/v1/wauth2/linelogin?audience=${y._.WOLT_AUTH_AUDIENCE??"wolt-com"}&locale=${e}`)(K)}),[K]),me=(0,s.useCallback)((async e=>{let{linkId:t,method:i}=e;try{await(e=>{let{method:t,linkId:i}=e;return(0,E.A)(V,A.f8.post(`/v1/wauth2/login_methods/${t}/start_verification`,{new_login_method_identifier:i}))})({linkId:t,method:i})}catch(e){return v.H.of($i(Y,e))}return v.w.of("ok")}),[Y]),pe=(0,s.useCallback)((async()=>{try{return await(0,I.O)(),v.w.of("ok")}catch(e){return v.H.of($i(Y,e))}}),[Y]),ge=(0,s.useCallback)((async e=>{try{return await(t={phone_number:e},(0,E.A)(T,A.ut.patch("/v1/user/me",{client_id:"web",...t}))),v.w.of("ok")}catch(e){return v.H.of($i(Y,e))}var t}),[Y]),fe=(0,p.D)(),be=(0,s.useCallback)((async e=>{let{email:t,recaptchaResult:o}=e;const n=i(fe);try{const e=await(async e=>{let{attribution:t,email:i,recaptchaResult:o,userFlow:n}=e;return(0,E.A)(N,A.f8.post("/v3/users/email_login",{attribution:t,email:i,user_flow:n},{headers:{"h-captcha-response":o}}))})({attribution:n,email:t,recaptchaResult:o,userFlow:W});return v.w.of({status:"magicLinkSent",isNewUserAccount:e.data.account_found??!1})}catch(e){var r;return(0,a.F0)(e)&&404===(null===(r=e.response)||void 0===r?void 0:r.status)?v.w.of({status:"signupRequired"}):v.H.of($i(Y,e))}}),[i,fe,W,Y]),ve=(0,s.useCallback)((async e=>{let{consents:t,country:i,firstName:o,lastName:n,phoneNumber:a,recaptchaResult:r,referralCode:s,...l}=e;if("authToken"===l.flow&&"email"!==l.authToken.method&&void 0!==B){const{method:e,value:t}=l.authToken;try{const i=await(0,L.a)(e,{apple:"apple"===e?{identity_token:t}:void 0,google_token:"google"===e?t:void 0,facebook_token:"facebook"===e?t:void 0,line_token:"line"===e?t:void 0,email:B,phone_number:a});return v.w.of({status:"linkAccount",verifyRequired:i.data.requires_verification,linkId:i.data.new_login_method_identifier})}catch(e){var c;const t=e;if(404!==(null===(c=t.response)||void 0===c?void 0:c.status))return v.H.of($i(Y,t))}}try{const e="authToken"===l.flow?l.authToken:void 0,c=await(e=>{let{recaptchaResult:t,...i}=e;return(0,E.A)(j,A.ut.post("/v2/user",{client_id:"web",...i},{headers:{"h-captcha-response":t}}))})({attribution_id:fe,apple:"apple"===(null==e?void 0:e.method)?{identity_token:e.value}:void 0,recaptchaResult:r,country:i,consents:t.map((e=>{let{id:t,value:i}=e;return{consent_id:t,value:i}})),credit_code:""!==s?s:void 0,email:"smsToken"===l.flow&&l.email||B,email_token:"email"===(null==e?void 0:e.method)?e.value:void 0,facebook_token:"facebook"===(null==e?void 0:e.method)?e.value:void 0,first_name:o,google_token:"google"===(null==e?void 0:e.method)?e.value:void 0,line_token:"line"===(null==e?void 0:e.method)?e.value:void 0,last_name:n,phone_number:a,sms_token:"smsToken"===l.flow?l.smsToken:void 0}),d=(null==e?void 0:e.method)??"email";le({type:"signupCompleted",payload:{method:d}});const u="smsToken"!==l.flow&&"email"!==(null==e?void 0:e.method)||!("login_token"in c.data)||void 0===c.data.login_token?e:{method:"user_creation_token",value:c.data.login_token};if(!u)throw new Error;return await O(u),x.Ep.sessionUserAccountAccessed({isEmailVerified:"authToken"===l.flow,isNewUserAccount:!0,isUnverifiedEmailFlow:"smsToken"===l.flow}),le({type:"loginCompleted",payload:{method:d}}),"smsToken"===l.flow?v.w.of({status:"accountCreated"}):v.w.of({isNewUserAccount:!0,status:"verifyPhoneNumber"})}catch(e){const t="authToken"===l.flow?l.authToken.method:"email",i=e.message;le({type:"signupFailed",payload:{error:i,method:t}});const{errorCode:o,msg:n,title:a}=qi(e);return 1021===o?v.w.of({bodyText:n,status:"magicLinkSent",titleText:a}):("authToken"===l.flow?x.Ep.signUpFormErrorSignupResult({errorMessage:n??i,loginMethod:t,errorCode:(0,C.R)(o)?String(o):void 0,isNewUserAccount:!0}):x.Ep.enterVerificationCodeErrorPhoneVerificationResult({errorCode:(0,C.R)(o)?String(o):"0",errorMessage:n??i,isUnverifiedEmailFlow:!0,isNewUserAccount:!0}),v.H.of($i(Y,e)))}}),[le,B,Y,O,fe]),Ce=(0,s.useCallback)((async e=>{let{authToken:t,code:i,linkId:o,method:n}=e;try{return await(e=>{let{code:t,linkId:i,method:o}=e;return A.f8.post(`/v1/wauth2/login_methods/${o}/verify`,{new_login_method_identifier:i,verification_code:t})})({code:i,linkId:o,method:n}),await O(t),x.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!1}),v.w.of("ok")}catch(e){return v.H.of($i(Y,e))}}),[Y,O]),ye=(0,m.tn)(),ke=(0,s.useCallback)((async e=>{let{code:t,isNewUserAccount:i}=e;try{return await(a={sms_code:t},A.f8.post("/v1/wauth2/me/verify_number",a,{})),ye(),x.Ep.enterVerificationCodeDataPhoneVerified({isNewUserAccount:i,isEmailVerified:!0,isUnverifiedEmailFlow:!1}),v.w.of("ok")}catch(e){var o,n;const t=e;return x.Ep.enterVerificationCodeErrorPhoneVerificationResult({errorCode:void 0!==(null===(o=t.response)||void 0===o?void 0:o.status)?String(t.response.status):"0",errorMessage:$i(Y,t),isUnverifiedEmailFlow:!1,isNewUserAccount:i}),404===(null===(n=t.response)||void 0===n?void 0:n.status)?v.H.of(Y({id:"auth.verify-code.invalid-code"})):v.H.of($i(Y,t))}var a}),[Y,ye]),we=(0,s.useCallback)((async e=>{try{return await(0,M.d)({emailToken:e.value}),v.w.of("ok")}catch(e){return v.H.of($i(Y,e))}}),[Y]),xe=(0,s.useCallback)((async e=>{try{const t=i(fe);return await(e=>{let{attribution:t,phoneNumber:i}=e;return A.f8.post("/v1/wauth2/consumer-sms",{attribution:t,phone_number:i})})({attribution:t,phoneNumber:e}),v.w.of({status:"smsSent"})}catch(e){var t;if((0,a.F0)(e)&&409===(null===(t=e.response)||void 0===t?void 0:t.status)){const{msg:t,title:i}=qi(e);return v.w.of({bodyText:t,status:"magicLinkSent",titleText:i})}return v.H.of($i(Y,e))}}),[Y,i,fe]),Se=(0,s.useCallback)((async e=>{let{authToken:t,code:i}=e;try{return await(e=>{let{emailToken:t,smsCode:i}=e;return A.f8.post("/v1/wauth2/consumer-sms-email-verification-validate",{email_token:t,sms_code:i})})({emailToken:t.value,smsCode:i}),await O(t),x.Ep.sessionUserAccountAccessed({isEmailVerified:!0,isNewUserAccount:!1,isUnverifiedEmailFlow:!0}),v.w.of("ok")}catch(e){var o;const t=e;return x.Ep.enterVerificationCodeErrorPhoneVerificationResult({errorCode:void 0!==(null===(o=t.response)||void 0===o?void 0:o.status)?String(t.response.status):"0",errorMessage:$i(Y,t),isUnverifiedEmailFlow:!0,isNewUserAccount:!1}),v.H.of($i(Y,t))}}),[Y,O]);return(0,o.jsx)(t,{authMethods:D,countries:ie,facebookLoginStatus:te,flow:H,initialCountryData:oe,initialState:z,isModalOpen:$,onAppleLogin:ce,onChangePhoneNumber:ge,onCheckIfLinkableExistingAccount:ne,onClose:ae,onContactSupport:d,onFacebookLogin:de,onGoogleLogin:ue,onLineLogin:he,onManageCookies:re,onModifyUserConsents:se,onSendLinkAccountVerificationCode:me,onResendPhoneNumberVerificationCode:pe,onSendMagicEmail:be,onSignup:ve,onSkipEmailVerificationResendEmailVerificationSms:we,onSkipEmailVerificationSendSms:xe,onSkipEmailVerificationVerifyEmail:Se,onVerifyLinkAccount:Ce,onVerifyPhoneNumber:ke,referralCode:q,privacyPolicyUrl:F.privacyPolicy,shouldDisableBackdropClose:ee,shouldEnableOneClickConsents:Q,signupEditPhoneNumberEnabled:X,termsUrl:F.terms,prompt:G,hideSubtitle:Z,geoIpCountryCode3:U})}},Gi=Wi({createModalNavigationStack:c.g,useCreateAccountConsents:Bi.W,useMarketingConsents:Hi.b,Modal:d.a})},70647:(e,t,i)=>{i.d(t,{z:()=>p});var o=i(71874),n=i(52902),a=i(91564),r=i(13573),s=i(68218),l=i(21712),c=i(55288),d=i(64339);const u=a.keyof({app_start:null,settings:null,signup:null,signup_v2:null}),h=a.intersection([a.type({id:a.string,title:a.string,default:a.boolean,required:a.boolean,slug:a.string,visibility:a.array(u),country:a.union([s.pm,a.literal("WOLTWIDE")])}),a.partial({aria_label:(0,l.U)(a.string),description:(0,l.U)(a.string),signup_title:(0,l.U)(a.string),signup_default:(0,l.U)(a.boolean),url:(0,l.U)(a.string),url_text:(0,l.U)(a.string)})]),m=a.array(h),p=e=>{const{locale:t}=(0,n.tz)(),i=(0,o.I)((e=>{let{language:t}=e;return["consentsConfig",t]})({language:t}),(()=>(async e=>{let{language:t}=e;return await(0,c.A)(m,r.ut.get("/v2/config/consents",{headers:{"App-Language":(0,d.L)(t)}}),{reportErrors:!0})})({language:t})),e);return i}},5201:(e,t,i)=>{i.d(t,{W:()=>a});var o=i(79474),n=i(50216);const a=e=>{let{country:t,shouldEnableOneClickConsents:i,useSignupConsentsQuery:a=n.F}=e;const r=a({country:t}),s=(0,o.useMemo)((()=>{if(!r)return;const e=r,t=e.some((e=>"MarketingConsents"===e.screen))&&i;return{consents:e.map((e=>{let{createAccountDefault:t,createAccountText:i,id:o,required:n,link:a,slug:r}=e;return{defaultValue:t,id:o,text:i,required:n,link:a,slug:r}})),isOneClickConsentFlow:t}}),[r,i]);return s}},4703:(e,t,i)=>{i.d(t,{b:()=>a});var o=i(79474),n=i(50216);const a=e=>{let{country:t,useSignupConsentsQuery:i=n.F}=e;const a=i({country:t}),r=(0,o.useMemo)((()=>{if(!a)return;const e=a.filter((e=>"MarketingConsents"===e.screen)).map((e=>{let{marketingConsentsDefault:t,marketingConsentsText:i,id:o,link:n,slug:a}=e;return{defaultValue:t??!0,id:o,link:"string"==typeof(null==n?void 0:n.ariaLabel)?{ariaLabel:n.ariaLabel,url:n.url}:null,slug:a,text:i}}));return e}),[a]);return r}},50216:(e,t,i)=>{i.d(t,{F:()=>n});var o=i(70647);const n=e=>{const{data:t}=(0,o.z)({select:t=>{let{data:i}=t;const o=i.filter((t=>{const i="WOLTWIDE"===t.country||t.country===e.country,o=t.visibility.includes("signup");return i&&o})).map((e=>{let{aria_label:t,default:i,id:o,required:n,signup_default:a,signup_title:r,slug:s,title:l,url:c,url_text:d,visibility:u}=e;return{createAccountDefault:i,createAccountText:l,marketingConsentsDefault:a,marketingConsentsText:r??l,id:o,link:"string"==typeof c&&"string"==typeof d?{ariaLabel:t??null,text:d,url:c}:null,required:n,screen:u.includes("signup_v2")?"MarketingConsents":"CreateAccount",slug:s}}));return o},refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!0});return t}}}]);
//# sourceMappingURL=6667-8e1840bd52f905f2f78d.chunk.js.map